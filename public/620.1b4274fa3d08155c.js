"use strict";(self.webpackChunksistema=self.webpackChunksistema||[]).push([[620],{7620:(O,p,u)=>{u.r(p),u.d(p,{AuthModule:()=>G});var d=u(6895),s=u(433),m=u(4154),e=u(8256);let v=(()=>{class o{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(t){return new(t||o)};static#o=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-main"]],decls:4,vars:0,consts:[[1,"limiter"],[1,"container-login100",2,"background-image","url('../../../../assets/images/bg-01.jpg')"],[1,"wrap-login100","p-l-50","p-r-50","p-t-50","p-b-50"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"router-outlet"),e.qZA()()())},dependencies:[m.lC],encapsulation:2})}return o})();var _=u(5226),c=u.n(_),g=u(629),Z=u(1740),f=u(6762);function b(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1," Usuario requerido. "),e.qZA())}function T(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1," El usuario debe tener al menos 4 caracteres. "),e.qZA())}function F(o,n){if(1&o&&(e.TgZ(0,"div",14),e.YNc(1,b,2,0,"div",15),e.YNc(2,T,2,0,"div",15),e.qZA()),2&o){const i=e.oxw();let t,r;e.xp6(1),e.Q6J("ngIf",null==(t=i.miFormulario.get("usuario"))?null:t.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==(r=i.miFormulario.get("usuario"))?null:r.hasError("minlength"))}}function N(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1," Contrase\xf1a requerida. "),e.qZA())}function P(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1," La contrase\xf1a debe tener al menos 6 caracteres. "),e.qZA())}function C(o,n){if(1&o&&(e.TgZ(0,"div",14),e.YNc(1,N,2,0,"div",15),e.YNc(2,P,2,0,"div",15),e.qZA()),2&o){const i=e.oxw();let t,r;e.xp6(1),e.Q6J("ngIf",null==(t=i.miFormulario.get("password"))?null:t.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==(r=i.miFormulario.get("password"))?null:r.hasError("minlength"))}}function h(){return o=>{if(!(o instanceof s.cw))return null;const n=o.get("newPassword")?.value,i=o.get("confirmNewPassword")?.value;return n===i?null:{mismatch:!0}}}function I(o,n){1&o&&(e.TgZ(0,"div",21),e._uU(1," Las contrase\xf1as no coinciden "),e.qZA())}function A(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1," Contrase\xf1a actual requerida. "),e.qZA())}function x(o,n){if(1&o&&(e.TgZ(0,"div",19),e.YNc(1,A,2,0,"div",20),e.qZA()),2&o){const i=e.oxw();let t;e.xp6(1),e.Q6J("ngIf",null==(t=i.miFormulario.get("password"))?null:t.hasError("required"))}}function k(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1," Nueva contrase\xf1a requerida. "),e.qZA())}function J(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1," La nueva contrase\xf1a debe tener al menos 6 caracteres. "),e.qZA())}function y(o,n){if(1&o&&(e.TgZ(0,"div",19),e.YNc(1,k,2,0,"div",20),e.YNc(2,J,2,0,"div",20),e.qZA()),2&o){const i=e.oxw();let t,r;e.xp6(1),e.Q6J("ngIf",null==(t=i.miFormulario.get("newPassword"))?null:t.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==(r=i.miFormulario.get("newPassword"))?null:r.hasError("minlength"))}}function Y(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1," Reingreso de contrase\xf1a requerida. "),e.qZA())}function S(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1," La nueva contrase\xf1a debe tener al menos 6 caracteres. "),e.qZA())}function L(o,n){if(1&o&&(e.TgZ(0,"div",19),e.YNc(1,Y,2,0,"div",20),e.YNc(2,S,2,0,"div",20),e.qZA()),2&o){const i=e.oxw();let t,r;e.xp6(1),e.Q6J("ngIf",null==(t=i.miFormulario.get("confirmNewPassword"))?null:t.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==(r=i.miFormulario.get("confirmNewPassword"))?null:r.hasError("minlength"))}}function Q(o,n){1&o&&(e.TgZ(0,"div",19),e._uU(1," Las contrase\xf1as no coinciden "),e.qZA())}const E=[{path:"",component:v,children:[{path:"login",component:(()=>{class o{constructor(i,t,r){this.fb=i,this.router=t,this.authService=r,this.miFormulario=this.fb.group({usuario:new s.NI({value:"",disabled:!1},[s.kI.required,s.kI.minLength(4)]),password:new s.NI({value:"",disabled:!1},[s.kI.required,s.kI.minLength(6)])})}ngOnInit(){const i=localStorage.getItem("token");i&&i&&this.router.navigateByUrl("/dashboard")}login(){const{usuario:i,password:t}=this.miFormulario.value;this.authService.login(i.trim(),t).subscribe(r=>{r.cambiarPassword?this.router.navigateByUrl("/auth/new-password"):!0===r.ok?this.router.navigateByUrl("/dashboard"):c().fire(r.msg,r.ok,r.icon)})}static#e=this.\u0275fac=function(t){return new(t||o)(e.Y36(s.qu),e.Y36(m.F0),e.Y36(g.e))};static#o=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],decls:21,vars:6,consts:[["autocomplete","off",1,"login100-form",3,"formGroup","ngSubmit"],[1,"login100-form-title","p-b-49"],[1,"col-12","p-3","m-0"],["htmlFor","apellido"],["pInputText","","id","usuario","formControlName","usuario","placeholder","Ingrese usuario"],[1,"h-1rem"],["class","error-message",4,"ngIf"],["htmlFor","contrase\xf1a"],["formControlName","password","placeholder","Ingrese su contrase\xf1a",3,"toggleMask","feedback"],[1,"text-right","p-t-8","p-b-31"],[1,"container-login100-form-btn"],[1,"wrap-login100-form-btn"],[1,"login100-form-bgbtn"],["type","submit",1,"login100-form-btn",3,"disabled"],[1,"error-message"],[4,"ngIf"]],template:function(t,r){if(1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return r.login()}),e.TgZ(1,"span",1),e._uU(2," \xa1Bienvenido! "),e.qZA(),e.TgZ(3,"div",2)(4,"label",3),e._uU(5,"Usuario"),e.qZA(),e._UZ(6,"input",4),e.TgZ(7,"div",5),e.YNc(8,F,3,2,"div",6),e.qZA()(),e.TgZ(9,"div",2)(10,"label",7),e._uU(11,"Contrase\xf1a"),e.qZA(),e._UZ(12,"p-password",8),e.TgZ(13,"div",5),e.YNc(14,C,3,2,"div",6),e.qZA()(),e._UZ(15,"div",9),e.TgZ(16,"div",10)(17,"div",11),e._UZ(18,"div",12),e.TgZ(19,"button",13),e._uU(20," Iniciar sesi\xf3n "),e.qZA()()()()),2&t){let a,l;e.Q6J("formGroup",r.miFormulario),e.xp6(8),e.Q6J("ngIf",null==(a=r.miFormulario.get("usuario"))?null:a.touched),e.xp6(4),e.Q6J("toggleMask",!0)("feedback",!1),e.xp6(2),e.Q6J("ngIf",null==(l=r.miFormulario.get("password"))?null:l.touched),e.xp6(5),e.Q6J("disabled",r.miFormulario.invalid)}},dependencies:[d.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,Z.o,f.ro],encapsulation:2})}return o})()},{path:"registro",component:(()=>{class o{constructor(i,t,r){this.fb=i,this.router=t,this.authService=r,this.showPassword=!1,this.showConfirmPassword=!1,this.miFormulario=this.fb.group({nombre:["",[s.kI.required]],email:["",[s.kI.required,s.kI.email]],password:["",[s.kI.required,s.kI.minLength(6)]],confirmPassword:["",[s.kI.required,s.kI.minLength(6),s.kI.required]]},{validators:h()})}toggleShowPassword(){this.showPassword=!this.showPassword}toggleShowConfirmPassword(){this.showConfirmPassword=!this.showConfirmPassword}registro(){const{nombre:i,email:t,password:r}=this.miFormulario.value;this.authService.registro(i,t,r).subscribe(a=>{!0===a?this.router.navigateByUrl("/dashboard"):c().fire("Error",a,"error")})}checkPasswords(i,t){i===t?this.miFormulario.get("confirmPassword")?.setErrors(null):this.miFormulario.get("confirmPassword")?.setErrors({mismatch:!0})}static#e=this.\u0275fac=function(t){return new(t||o)(e.Y36(s.qu),e.Y36(m.F0),e.Y36(g.e))};static#o=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-register"]],decls:39,vars:11,consts:[["autocomplete","off",1,"login100-form",3,"formGroup","ngSubmit"],[1,"login100-form-title","p-b-49"],[1,"wrap-input100","m-b-23"],[1,"label-input100"],["type","text","formControlName","nombre","placeholder","Ingrese su nombre",1,"input100"],[1,"focus-input100"],["type","email","formControlName","email","placeholder","Ingrese su email",1,"input100"],[1,"input-icon"],["formControlName","password","placeholder","Ingrese su contrase\xf1a",1,"input100",3,"type"],[3,"click"],[1,"wrap-input100"],["formControlName","confirmPassword","placeholder","Reingrese su contrase\xf1a",1,"input100",3,"type","blur"],["class","error-message",4,"ngIf"],[1,"text-right","p-t-8","p-b-31"],[1,"container-login100-form-btn"],[1,"wrap-login100-form-btn"],[1,"login100-form-bgbtn"],["type","submit",1,"login100-form-btn",3,"disabled"],[1,"flex-col-c","p-t-60"],[1,"txt1","p-b-17"],["routerLink","/auth",1,"txt2"],[1,"error-message"]],template:function(t,r){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return r.registro()}),e.TgZ(1,"span",1),e._uU(2," Nuevo usuario "),e.qZA(),e.TgZ(3,"div",2)(4,"span",3),e._uU(5,"Nombre"),e.qZA(),e._UZ(6,"input",4)(7,"span",5),e.qZA(),e.TgZ(8,"div",2)(9,"span",3),e._uU(10,"Email"),e.qZA(),e._UZ(11,"input",6)(12,"span",5),e.qZA(),e.TgZ(13,"div",2)(14,"span",3),e._uU(15,"Contrase\xf1a"),e.qZA(),e.TgZ(16,"div",7),e._UZ(17,"input",8)(18,"span",5),e.TgZ(19,"i",9),e.NdJ("click",function(){return r.toggleShowPassword()}),e.qZA()()(),e.TgZ(20,"div",10)(21,"span",3),e._uU(22,"Repetir contrase\xf1a"),e.qZA(),e.TgZ(23,"div",7)(24,"input",11),e.NdJ("blur",function(){let l;return r.checkPasswords(null==(l=r.miFormulario.get("password"))?null:l.value,null==(l=r.miFormulario.get("confirmPassword"))?null:l.value)}),e.qZA(),e._UZ(25,"span",5),e.TgZ(26,"i",9),e.NdJ("click",function(){return r.toggleShowConfirmPassword()}),e.qZA()()(),e.YNc(27,I,2,0,"div",12),e._UZ(28,"div",13),e.TgZ(29,"div",14)(30,"div",15),e._UZ(31,"div",16),e.TgZ(32,"button",17),e._uU(33," Registrar "),e.qZA()()(),e.TgZ(34,"div",18)(35,"span",19),e._uU(36," \xbfYa ten\xe9s una cuenta? "),e.qZA(),e.TgZ(37,"a",20),e._uU(38," Ingresa aqu\xed "),e.qZA()()()),2&t&&(e.Q6J("formGroup",r.miFormulario),e.xp6(17),e.s9C("type",r.showPassword?"text":"password"),e.xp6(2),e.Gre("fas ",r.showPassword?"fa-eye-slash":"fa-eye",""),e.xp6(5),e.s9C("type",r.showConfirmPassword?"text":"password"),e.xp6(2),e.Gre("fas ",r.showConfirmPassword?"fa-eye-slash":"fa-eye",""),e.xp6(1),e.Q6J("ngIf",r.miFormulario.hasError("mismatch","confirmPassword")),e.xp6(5),e.Q6J("disabled",r.miFormulario.invalid))},dependencies:[d.O5,m.rH,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u],encapsulation:2})}return o})()},{path:"new-password",component:(()=>{class o{constructor(i,t,r){this.fb=i,this.router=t,this.authService=r,this.showPassword=!1,this.showNewPassword=!1,this.showConfirmNewPassword=!1,this.miFormulario=this.fb.group({password:["",[s.kI.required,s.kI.minLength(6)]],newPassword:["",[s.kI.required,s.kI.minLength(6)]],confirmNewPassword:["",[s.kI.required,s.kI.minLength(6)]]},{validators:h()}),localStorage.removeItem("token")}ngOnInit(){Object.keys(this.authService.usuario).length>0?this.usuario=this.authService.usuario:this.router.navigateByUrl("/auth")}toggleShowPassword(){this.showPassword=!this.showPassword}toggleShowNewPassword(){this.showNewPassword=!this.showNewPassword}toggleShowConfirmNewPassword(){this.showConfirmNewPassword=!this.showConfirmNewPassword}cambiar(){const{password:i,confirmNewPassword:t}=this.miFormulario.value;this.authService.cambiarPassword(this.usuario.id,i,t,!1).subscribe(r=>{!0===r.ok&&this.router.navigateByUrl("/auth"),c().fire(r.msg,r.ok,r.icon)})}checkPasswords(i,t){i===t?this.miFormulario.get("confirmNewPassword")?.setErrors(null):this.miFormulario.get("confirmNewPassword")?.setErrors({mismatch:!0})}static#e=this.\u0275fac=function(t){return new(t||o)(e.Y36(s.qu),e.Y36(m.F0),e.Y36(g.e))};static#o=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-new-password"]],decls:34,vars:12,consts:[["autocomplete","off",1,"login100-form",3,"formGroup","ngSubmit"],[1,"login100-form-title","p-b-49"],[1,"col-12","p-3","m-0"],["htmlFor","contrase\xf1a"],["formControlName","password","placeholder","Ingrese su contrase\xf1a actual",3,"toggleMask","feedback"],[1,"h-1rem"],["class","error-message",4,"ngIf"],["htmlFor","newPassword"],["formControlName","newPassword","placeholder","Ingrese su nueva contrase\xf1a",3,"toggleMask","feedback"],["htmlFor","confirmNewPassword"],["formControlName","confirmNewPassword","placeholder","Reingrese su nueva contrase\xf1a",3,"toggleMask","feedback"],[1,"text-right","p-t-8","p-b-31"],[1,"container-login100-form-btn"],[1,"wrap-login100-form-btn"],[1,"login100-form-bgbtn"],["type","submit",1,"login100-form-btn",3,"disabled"],[1,"flex-col-c","p-t-50"],[1,"txt1","p-b-17"],["routerLink","/auth",1,"txt2"],[1,"error-message"],[4,"ngIf"]],template:function(t,r){if(1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return r.cambiar()}),e.TgZ(1,"span",1),e._uU(2," Cambiar contrase\xf1a "),e.qZA(),e.TgZ(3,"div",2)(4,"label",3),e._uU(5,"Contrase\xf1a actual"),e.qZA(),e._UZ(6,"p-password",4),e.TgZ(7,"div",5),e.YNc(8,x,2,1,"div",6),e.qZA()(),e.TgZ(9,"div",2)(10,"label",7),e._uU(11,"Nueva contrase\xf1a"),e.qZA(),e._UZ(12,"p-password",8),e.TgZ(13,"div",5),e.YNc(14,y,3,2,"div",6),e.qZA()(),e.TgZ(15,"div",2)(16,"label",9),e._uU(17,"Repetir contrase\xf1a"),e.qZA(),e._UZ(18,"p-password",10),e.TgZ(19,"div",5),e.YNc(20,L,3,2,"div",6),e.qZA()(),e.TgZ(21,"div",5),e.YNc(22,Q,2,0,"div",6),e.qZA(),e._UZ(23,"div",11),e.TgZ(24,"div",12)(25,"div",13),e._UZ(26,"div",14),e.TgZ(27,"button",15),e._uU(28," Cambiar "),e.qZA()()(),e.TgZ(29,"div",16)(30,"span",17),e._uU(31," \xbfYa ten\xe9s una cuenta? "),e.qZA(),e.TgZ(32,"a",18),e._uU(33," Ingresa aqu\xed "),e.qZA()()()),2&t){let a,l,w;e.Q6J("formGroup",r.miFormulario),e.xp6(6),e.Q6J("toggleMask",!0)("feedback",!1),e.xp6(2),e.Q6J("ngIf",null==(a=r.miFormulario.get("password"))?null:a.touched),e.xp6(4),e.Q6J("toggleMask",!0)("feedback",!1),e.xp6(2),e.Q6J("ngIf",null==(l=r.miFormulario.get("newPassword"))?null:l.touched),e.xp6(4),e.Q6J("toggleMask",!0)("feedback",!1),e.xp6(2),e.Q6J("ngIf",null==(w=r.miFormulario.get("confirmNewPassword"))?null:w.touched),e.xp6(2),e.Q6J("ngIf",r.miFormulario.hasError("mismatch","confirmNewPassword")),e.xp6(5),e.Q6J("disabled",r.miFormulario.invalid)}},dependencies:[d.O5,m.rH,s._Y,s.JJ,s.JL,s.sg,s.u,f.ro],encapsulation:2})}return o})()},{path:"**",redirectTo:"login"}]}];let M=(()=>{class o{static#e=this.\u0275fac=function(t){return new(t||o)};static#o=this.\u0275mod=e.oAB({type:o});static#r=this.\u0275inj=e.cJS({imports:[m.Bz.forChild(E),m.Bz]})}return o})();var R=u(4466),B=u(6867);let G=(()=>{class o{static#e=this.\u0275fac=function(t){return new(t||o)};static#o=this.\u0275mod=e.oAB({type:o});static#r=this.\u0275inj=e.cJS({imports:[d.ez,M,s.UX,B.g,R.m]})}return o})()}}]);