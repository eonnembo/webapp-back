"use strict";(self.webpackChunksistema=self.webpackChunksistema||[]).push([[411],{9411:(H,h,a)=>{a.r(h),a.d(h,{ConfiguracionesModule:()=>j});var g=a(6895),b=a(4154),t=a(8256),E=a(8741),U=a(6526),A=a(4247),v=a(8783),p=a(5849),y=a(5226),Z=a.n(y),i=a(433),d=a(805),m=a(9646),c=a(4004),u=a(262),S=a(2340),N=a(529);let T=(()=>{class o{get empresa(){return{...this._empresa}}constructor(r){this.http=r,this.baseUrl=S.N.baseUrl}traerEmpresas(){return this.http.get(`${this.baseUrl}/empresa`).pipe((0,c.U)(e=>e),(0,u.K)(e=>(0,m.of)(!1)))}traerUnaEmpresa(r){return this.http.get(`${this.baseUrl}/empresa/${r}`).pipe((0,c.U)(n=>(this._empresa=n,n)),(0,u.K)(n=>(0,m.of)(!1)))}crearEmpresa(r){return this.http.post(`${this.baseUrl}/empresa`,r).pipe((0,c.U)(n=>n),(0,u.K)(n=>(0,m.of)(n.error)))}modificarEmpresa(r){return this.http.put(`${this.baseUrl}/empresa/${r.id}`,r).pipe((0,c.U)(n=>n),(0,u.K)(n=>(0,m.of)(n.error)))}static#t=this.\u0275fac=function(e){return new(e||o)(t.LFG(N.eN))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var C=a(5593),F=a(1740);function I(o,l){1&o&&(t.TgZ(0,"div"),t._uU(1," Nombre requerido. "),t.qZA())}function _(o,l){1&o&&(t.TgZ(0,"div"),t._uU(1," El nombre debe tener al menos 4 caracteres. "),t.qZA())}function P(o,l){if(1&o&&(t.TgZ(0,"div",14),t.YNc(1,I,2,0,"div",15),t.YNc(2,_,2,0,"div",15),t.qZA()),2&o){const r=t.oxw();let e,n;t.xp6(1),t.Q6J("ngIf",null==(e=r.miFormulario.get("nombre"))?null:e.hasError("required")),t.xp6(1),t.Q6J("ngIf",null==(n=r.miFormulario.get("nombre"))?null:n.hasError("minlength"))}}const M=function(){return{"margin-left":".5em"}};let z=(()=>{class o{constructor(r,e,n,s,f){this.fb=r,this.empresaService=e,this.ref=n,this.config=s,this.confirmationService=f,this.miFormulario=this.fb.group({id:new i.NI({value:"",disabled:!1}),nombre:new i.NI({value:"",disabled:!1},[i.kI.required,i.kI.minLength(4)]),razonSocial:new i.NI({value:"",disabled:!1}),telefono:new i.NI({value:"",disabled:!1})}),this.edito=!1}ngOnInit(){const r=this.config.data;r&&(this.edito=!0,this.miFormulario.get("nombre")?.disable(),this.empresaService.traerUnaEmpresa(r).subscribe(e=>{this.miFormulario.patchValue(e)}))}guardar(){this.edito?this.miFormulario.get("nombre")?.enable():this.miFormulario.get("id")?.disable(),this.ref.close({edito:this.edito,data:this.miFormulario.value}),this.edito=!1}closeForm(){this.edito=!1,this.ref.close()}static#t=this.\u0275fac=function(e){return new(e||o)(t.Y36(i.qu),t.Y36(T),t.Y36(p.E7),t.Y36(p.S),t.Y36(d.YP))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-formulario-empresas"]],features:[t._Bn([d.YP])],decls:19,vars:6,consts:[["autocomplete","off",1,"pt-2",3,"formGroup","ngSubmit"],[1,"grid"],[1,"col-12","lg:col-6","p-3","m-0"],["htmlFor","nombre"],["pInputText","","id","nombre","formControlName","nombre","placeholder","Ingrese nombre"],[1,"h-1rem"],["class","error-message",4,"ngIf"],["htmlFor","razonSocial"],["pInputText","","id","razonSocial","formControlName","razonSocial","placeholder","Ingrese raz\xf3n social"],["htmlFor","telefono"],["pInputText","","id","telefono","formControlName","telefono","placeholder","Ingrese telefono"],[1,"text-center","col-12","p-3","m-0"],["label","Guardar","type","submit","icon","pi pi-check",3,"disabled"],["label","Cancelar","icon","pi pi-times","styleClass","p-button-secondary",3,"click"],[1,"error-message"],[4,"ngIf"]],template:function(e,n){if(1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.guardar()}),t.TgZ(1,"div",1)(2,"div",2)(3,"label",3),t._uU(4,"Nombre"),t.qZA(),t._UZ(5,"input",4),t.TgZ(6,"div",5),t.YNc(7,P,3,2,"div",6),t.qZA()(),t.TgZ(8,"div",2)(9,"label",7),t._uU(10,"Raz\xf3n social"),t.qZA(),t._UZ(11,"input",8),t.qZA(),t.TgZ(12,"div",2)(13,"label",9),t._uU(14,"Tel\xe9fono"),t.qZA(),t._UZ(15,"input",10),t.qZA()(),t.TgZ(16,"div",11),t._UZ(17,"p-button",12),t.TgZ(18,"p-button",13),t.NdJ("click",function(){return n.closeForm()}),t.qZA()()()),2&e){let s;t.Q6J("formGroup",n.miFormulario),t.xp6(7),t.Q6J("ngIf",null==(s=n.miFormulario.get("nombre"))?null:s.touched),t.xp6(10),t.Q6J("disabled",n.miFormulario.invalid),t.xp6(1),t.Akn(t.DdM(5,M))}},dependencies:[g.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,C.zx,F.o]})}return o})();var Y=a(3608),J=a(1755);function O(o,l){if(1&o){const r=t.EpF();t.TgZ(0,"div",6)(1,"span",7),t._UZ(2,"i",8),t.TgZ(3,"input",9),t.NdJ("input",function(n){t.CHM(r),t.oxw();const s=t.MAs(2);return t.KtG(s.filterGlobal(n.target.value,"contains"))}),t.qZA()(),t.TgZ(4,"span")(5,"button",10),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.show())}),t.qZA()()()}}function q(o,l){1&o&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Nombre"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Raz\xf3n social"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Tel\xe9fono"),t.qZA(),t._UZ(7,"th"),t.qZA())}function R(o,l){if(1&o){const r=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"span",11),t._uU(3,"Nombre"),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"span",11),t._uU(7,"Raz\xf3n social"),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"td")(10,"span",11),t._uU(11,"Tel\xe9fono"),t.qZA(),t._uU(12),t.qZA(),t.TgZ(13,"td",12)(14,"button",13),t.NdJ("click",function(){const s=t.CHM(r).$implicit,f=t.oxw();return t.KtG(f.show(s.id))}),t.qZA()()()}if(2&o){const r=l.$implicit;t.xp6(4),t.Oqu(r.nombre),t.xp6(4),t.Oqu(r.razonSocial?r.razonSocial:"-"),t.xp6(4),t.Oqu(r.telefono?r.telefono:"-")}}const w=function(){return{"min-width":"20rem"}},B=function(){return["nombre","razonSocial"]},G=function(){return[10,25,50]};let x=(()=>{class o{constructor(r,e){this.empresaService=r,this.dialogService=e,this.empresas=[]}ngOnInit(){this.traerEmpresas()}traerEmpresas(){this.subscription=this.empresaService.traerEmpresas().subscribe(r=>{this.empresas=this.empresas=r.sort((e,n)=>n.id-e.id)})}show(r){this.ref=this.dialogService.open(z,{header:r?"Editar empresa":"Nueva empresa",width:"70%",contentStyle:{overflow:"auto"},baseZIndex:1e4,maximizable:!0,data:r}),this.ref.onClose.subscribe(e=>{e&&(e.edito?(console.log("\u{1f60f} ~ this.ref.onClose.subscribe ~ empresa.edito:",e.edito),this.empresaService.modificarEmpresa(e.data).subscribe(n=>{Z().fire(n.msg,"",n.icon),this.traerEmpresas()})):this.empresaService.crearEmpresa(e.data).subscribe(n=>{Z().fire(n.msg,"",n.icon),this.traerEmpresas()}))})}ngOnDestroy(){this.ref&&this.ref.close(),this.subscription.unsubscribe()}static#t=this.\u0275fac=function(e){return new(e||o)(t.Y36(T),t.Y36(p.xA))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-tabla-empresas"]],features:[t._Bn([p.xA])],decls:6,vars:10,consts:[[1,"card","mt-0","pt-0"],["dataKey","id","responsiveLayout","stack","currentPageReportTemplate","{first} al {last} de {totalRecords}",3,"value","tableStyle","paginator","rows","showCurrentPageReport","globalFilterFields","rowsPerPageOptions"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex","align-items-center","justify-content-between","my-0","py-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",3,"input"],["pButton","","pRipple","","icon","pi pi-plus","pTooltip","Nueva empresa","tooltipPosition","left",1,"p-button-success","mr-2",3,"click"],[1,"p-column-title"],[1,"text-center"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-help","mr-2",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"p-table",1,2),t.YNc(3,O,6,0,"ng-template",3),t.YNc(4,q,8,0,"ng-template",4),t.YNc(5,R,15,3,"ng-template",5),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("value",n.empresas)("tableStyle",t.DdM(7,w))("paginator",n.empresas.length>10)("rows",5)("showCurrentPageReport",!0)("globalFilterFields",t.DdM(8,B))("rowsPerPageOptions",t.DdM(9,G)))},dependencies:[Y.u,d.jx,C.Hq,J.iA,F.o],styles:["*[_ngcontent-%COMP%]{margin:15px}.card[_ngcontent-%COMP%]{border:1px solid var(--surface-border)!important;border-radius:12px!important}"]})}return o})();const K=[{path:"",children:[{path:"",component:(()=>{class o{static#t=this.\u0275fac=function(e){return new(e||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-configuracion"]],decls:17,vars:0,consts:[[1,"card"],["header","EMPRESA"],["header","MERCADO PAGO"],["header","Credenciales",1,"mt-0","pt-0"],["header","SISTEMA"],["header","Configuralo a tu gusto",1,"mt-0","pt-0"]],template:function(e,n){1&e&&(t._UZ(0,"app-tool-bar"),t.TgZ(1,"h1"),t._uU(2,"Configuraci\xf3n"),t.qZA(),t._UZ(3,"hr"),t.TgZ(4,"div",0)(5,"p-tabView")(6,"p-tabPanel",1),t._UZ(7,"app-tabla-empresas"),t.qZA(),t.TgZ(8,"p-tabPanel",2)(9,"p-card",3)(10,"h3"),t._uU(11," Pr\xf3ximamente! "),t.qZA()()(),t.TgZ(12,"p-tabPanel",4)(13,"p-card",5)(14,"h3"),t._uU(15," Pr\xf3ximamente! "),t.qZA()()()()(),t._UZ(16,"app-footer"))},dependencies:[E.o,U.c,A.Z,v.xf,v.x4,x],styles:["*[_ngcontent-%COMP%]{margin:15px}.card[_ngcontent-%COMP%]{border:1px solid var(--surface-border)!important;border-radius:12px!important}"]})}return o})()},{path:"empresa",component:x},{path:"**",redirectTo:"auth"}]}];let $=(()=>{class o{static#t=this.\u0275fac=function(e){return new(e||o)};static#e=this.\u0275mod=t.oAB({type:o});static#r=this.\u0275inj=t.cJS({imports:[b.Bz.forChild(K),b.Bz]})}return o})();var D=a(4466),Q=a(6209);let j=(()=>{class o{static#t=this.\u0275fac=function(e){return new(e||o)};static#e=this.\u0275mod=t.oAB({type:o});static#r=this.\u0275inj=t.cJS({imports:[g.ez,i.UX,$,D.m,Q.g]})}return o})()}}]);