"use strict";(self.webpackChunksistema=self.webpackChunksistema||[]).push([[360],{9360:(me,f,l)=>{l.r(f),l.d(f,{ClientesModule:()=>ce});var _=l(6895),g=l(4154),u=l(4325),r=l(433),U=l(5226),p=l.n(U),m=l(805),e=l(8256),h=l(4445),v=l(3608),Z=l(5593),C=l(2137),I=l(369),T=l(1740),y=l(1167),Y=l(3520);function J(t,a){1&t&&(e.TgZ(0,"div"),e._uU(1," Nombre requerido. "),e.qZA())}function M(t,a){if(1&t&&(e.TgZ(0,"div",24),e.YNc(1,J,2,0,"div",19),e.qZA()),2&t){const i=e.oxw();let o;e.xp6(1),e.Q6J("ngIf",null==(o=i.miFormulario.get("nombre"))?null:o.hasError("required"))}}function E(t,a){1&t&&(e.TgZ(0,"div"),e._uU(1," Apellido requerido. "),e.qZA())}function S(t,a){if(1&t&&(e.TgZ(0,"div",24),e.YNc(1,E,2,0,"div",19),e.qZA()),2&t){const i=e.oxw();let o;e.xp6(1),e.Q6J("ngIf",null==(o=i.miFormulario.get("apellido"))?null:o.hasError("required"))}}function w(t,a){1&t&&(e.TgZ(0,"div"),e._uU(1," DNI requerido. "),e.qZA())}function P(t,a){if(1&t&&(e.TgZ(0,"div",24),e.YNc(1,w,2,0,"div",19),e.qZA()),2&t){const i=e.oxw();let o;e.xp6(1),e.Q6J("ngIf",null==(o=i.miFormulario.get("dni"))?null:o.hasError("required"))}}function O(t,a){1&t&&(e.TgZ(0,"div"),e._uU(1," Fecha de nacimiento requerida. "),e.qZA())}function Q(t,a){if(1&t&&(e.TgZ(0,"div",24),e.YNc(1,O,2,0,"div",19),e.qZA()),2&t){const i=e.oxw();let o;e.xp6(1),e.Q6J("ngIf",null==(o=i.miFormulario.get("fechaNacimiento"))?null:o.hasError("required"))}}function k(t,a){1&t&&(e.TgZ(0,"div"),e._uU(1," El email no es v\xe1lido. "),e.qZA())}function D(t,a){if(1&t&&(e.TgZ(0,"div",24),e.YNc(1,k,2,0,"div",19),e.qZA()),2&t){const i=e.oxw();let o;e.xp6(1),e.Q6J("ngIf",null==(o=i.miFormulario.get("email"))?null:o.hasError("email"))}}function B(t,a){1&t&&(e.TgZ(0,"div"),e._uU(1," Email requerido. "),e.qZA())}function G(t,a){if(1&t&&(e.TgZ(0,"div",24),e.YNc(1,B,2,0,"div",19),e.qZA()),2&t){const i=e.oxw();let o;e.xp6(1),e.Q6J("ngIf",null==(o=i.miFormulario.get("email"))?null:o.hasError("required"))}}function R(t,a){1&t&&(e.TgZ(0,"div"),e._uU(1," Tel\xe9fono requerido. "),e.qZA())}function j(t,a){if(1&t&&(e.TgZ(0,"div",24),e.YNc(1,R,2,0,"div",19),e.qZA()),2&t){const i=e.oxw();let o;e.xp6(1),e.Q6J("ngIf",null==(o=i.miFormulario.get("telefono"))?null:o.hasError("required"))}}function H(t,a){if(1&t){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",10)(2,"label",25),e._uU(3,"Estado"),e.qZA(),e._UZ(4,"p-confirmPopup"),e.TgZ(5,"p-toggleButton",26),e.NdJ("onChange",function(n){e.CHM(i);const s=e.oxw();return e.KtG(s.confirm(n,"estado"))}),e.qZA()(),e.BQk()}}const b=function(){return{margin:".5em",width:"9rem"}};let x=(()=>{class t{constructor(i,o,n,s,c,d){this.ref=i,this.config=o,this.fb=n,this.clienteService=s,this.confirmationService=c,this.router=d,this.miFormulario=this.fb.group({id:new r.NI({value:"",disabled:!1}),nombre:new r.NI({value:"",disabled:!1},[r.kI.required]),apellido:new r.NI({value:"",disabled:!1},[r.kI.required]),password:new r.NI({value:"",disabled:!1}),dni:new r.NI({value:null,disabled:!1},[r.kI.required]),fechaNacimiento:new r.NI({value:null,disabled:!1},[r.kI.required]),email:new r.NI({value:"",disabled:!1},[r.kI.required,r.kI.email]),telefono:new r.NI({value:"",disabled:!1},[r.kI.required]),estado:new r.NI({value:!0,disabled:!1})}),this.edito=!1}ngOnInit(){const i=this.config.data;i&&(this.edito=!0,this.miFormulario.get("dni")?.disable(),this.clienteService.traerUnCliente(i).subscribe(o=>{this.miFormulario.patchValue(o)}))}confirm(i,o){this.confirmationService.confirm({target:i.originalEvent.target,message:"\xbfCancelar cambio?",icon:"pi pi-exclamation-triangle",defaultFocus:"none",accept:()=>{this.miFormulario.get(o)?.setValue(!i.checked)}})}guardar(){this.edito?(this.miFormulario.get("id")?.enable(),this.miFormulario.get("dni")?.enable(),this.clienteService.modificarCliente(this.miFormulario.value).subscribe(i=>{p().fire(i.msg,"",i.icon),i.ok&&this.closeForm()})):(this.miFormulario.get("id")?.disable(),this.clienteService.crearCliente(this.miFormulario.value).subscribe(i=>{i.ok?p().fire(i.msg,"",i.icon).then(o=>{o.isConfirmed&&this.confirmationService.confirm({message:"\xbfDeseas registrar el servicio para el cliente?",header:"Confirmaci\xf3n",icon:"pi pi-exclamation-triangle",accept:()=>{this.router.navigate(["servicios",i.idCliente]),this.closeForm()},reject:()=>{this.closeForm()}})}):p().fire(i.msg,"",i.icon)}))}closeForm(){this.edito=!1,this.ref.close()}static#e=this.\u0275fac=function(o){return new(o||t)(e.Y36(u.E7),e.Y36(u.S),e.Y36(r.qu),e.Y36(h.$),e.Y36(m.YP),e.Y36(g.F0))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-formulario-clientes"]],features:[e._Bn([m.YP])],decls:56,vars:16,consts:[["autocomplete","off",1,"pt-2",3,"formGroup","ngSubmit"],[1,"grid"],[1,"col-12","lg:col-6","p-3","m-0"],["htmlFor","nombre"],["pTooltip","Requerido","tooltipPosition","top",1,"required"],["pInputText","","id","nombre","formControlName","nombre","placeholder","Ingrese nombre"],[1,"h-1rem"],["class","error-message",4,"ngIf"],["htmlFor","apellido"],["pInputText","","id","apellido","formControlName","apellido","placeholder","Ingrese apellido"],[1,"flex","flex-column","col-12","lg:col-6","p-3","m-0"],["htmlFor","dni"],["id","dni","mask","99.999.999","formControlName","dni","placeholder","99.999.999"],["htmlFor","fechaNacimiento"],["formControlName","fechaNacimiento","mask","9999-99-99","placeholder","AAAA-MM-DD","slotChar","AAAA-MM-DD"],["htmlFor","email"],["pInputText","","id","email","formControlName","email","placeholder","Ingrese email"],["htmlFor","telefono"],["id","telefono","mask","15 9999 9999","formControlName","telefono","placeholder","15 9999 9999"],[4,"ngIf"],[1,"text-center","col-12","p-3","m-0"],["label","Guardar","type","submit","icon","pi pi-check",3,"disabled"],["label","Cancelar","icon","pi pi-times","styleClass","p-button-secondary",3,"onClick"],[1,"confirmation"],[1,"error-message"],["htmlFor","estado"],["formControlName","estado","onLabel","ACTIVO","offLabel","INACTIVO",3,"onChange"]],template:function(o,n){if(1&o&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.guardar()}),e.TgZ(1,"div",1)(2,"div",2)(3,"label",3),e._uU(4,"Nombre"),e.TgZ(5,"span",4),e._uU(6,"*"),e.qZA()(),e._UZ(7,"input",5),e.TgZ(8,"div",6),e.YNc(9,M,2,1,"div",7),e.qZA()(),e.TgZ(10,"div",2)(11,"label",8),e._uU(12,"Apellido"),e.TgZ(13,"span",4),e._uU(14,"*"),e.qZA()(),e._UZ(15,"input",9),e.TgZ(16,"div",6),e.YNc(17,S,2,1,"div",7),e.qZA()(),e.TgZ(18,"div",10)(19,"label",11),e._uU(20,"DNI"),e.TgZ(21,"span",4),e._uU(22,"*"),e.qZA()(),e._UZ(23,"p-inputMask",12),e.TgZ(24,"div",6),e.YNc(25,P,2,1,"div",7),e.qZA()(),e.TgZ(26,"div",2)(27,"label",13),e._uU(28,"Fecha de nacimiento"),e.TgZ(29,"span",4),e._uU(30,"*"),e.qZA()(),e._UZ(31,"p-inputMask",14),e.TgZ(32,"div",6),e.YNc(33,Q,2,1,"div",7),e.qZA()(),e.TgZ(34,"div",2)(35,"label",15),e._uU(36,"Email"),e.TgZ(37,"span",4),e._uU(38,"*"),e.qZA()(),e._UZ(39,"input",16),e.TgZ(40,"div",6),e.YNc(41,D,2,1,"div",7),e.YNc(42,G,2,1,"div",7),e.qZA()(),e.TgZ(43,"div",2)(44,"label",17),e._uU(45,"Tel\xe9fono"),e.TgZ(46,"span",4),e._uU(47,"*"),e.qZA()(),e._UZ(48,"p-inputMask",18),e.TgZ(49,"div",6),e.YNc(50,j,2,1,"div",7),e.qZA()(),e.YNc(51,H,6,0,"ng-container",19),e.qZA(),e.TgZ(52,"div",20),e._UZ(53,"p-button",21),e.TgZ(54,"p-button",22),e.NdJ("onClick",function(){return n.closeForm()}),e.qZA()()(),e._UZ(55,"p-confirmDialog",23)),2&o){let s,c,d,A,F,q,N;e.Q6J("formGroup",n.miFormulario),e.xp6(9),e.Q6J("ngIf",null==(s=n.miFormulario.get("nombre"))?null:s.touched),e.xp6(8),e.Q6J("ngIf",null==(c=n.miFormulario.get("apellido"))?null:c.touched),e.xp6(8),e.Q6J("ngIf",null==(d=n.miFormulario.get("dni"))?null:d.touched),e.xp6(8),e.Q6J("ngIf",null==(A=n.miFormulario.get("fechaNacimiento"))?null:A.touched),e.xp6(8),e.Q6J("ngIf",null==(F=n.miFormulario.get("email"))?null:F.touched),e.xp6(1),e.Q6J("ngIf",null==(q=n.miFormulario.get("email"))?null:q.touched),e.xp6(8),e.Q6J("ngIf",null==(N=n.miFormulario.get("telefono"))?null:N.touched),e.xp6(1),e.Q6J("ngIf",n.edito),e.xp6(2),e.Akn(e.DdM(14,b)),e.Q6J("disabled",n.miFormulario.invalid),e.xp6(1),e.Akn(e.DdM(15,b))}},dependencies:[_.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,v.u,Z.zx,C.Q,I.P,T.o,y.CO,Y.vy],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;text-align:center;border:1px solid #ddd}th[_ngcontent-%COMP%]{background-color:#f2f2f2}.cupo-disponible[_ngcontent-%COMP%]{background-color:#afa}.cupo-agotado[_ngcontent-%COMP%]{background-color:#faa}"]})}return t})();var K=l(308),z=l(6679),L=l(8741),V=l(6526),$=l(5793);function X(t,a){if(1&t){const i=e.EpF();e.TgZ(0,"div",8)(1,"span",9),e._UZ(2,"i",10),e.TgZ(3,"input",11),e.NdJ("input",function(n){e.CHM(i),e.oxw();const s=e.MAs(6);return e.KtG(s.filterGlobal(n.target.value,"contains"))}),e.qZA()(),e.TgZ(4,"span")(5,"button",12),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.show())}),e.qZA()()()}}function W(t,a){1&t&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Nombre"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Apellido"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"DNI"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Email"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Tel\xe9fono"),e.qZA(),e.TgZ(11,"th",13),e._uU(12,"Estado"),e.qZA(),e._UZ(13,"th"),e.qZA())}function ee(t,a){if(1&t){const i=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"span",14),e._uU(3,"Nombre"),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"span",14),e._uU(7,"Apellido"),e.qZA(),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"span",14),e._uU(11,"DNI"),e.qZA(),e._uU(12),e.ALo(13,"dniFormat"),e.qZA(),e.TgZ(14,"td")(15,"span",14),e._uU(16,"Email"),e.qZA(),e._uU(17),e.qZA(),e.TgZ(18,"td")(19,"span",14),e._uU(20,"Tel\xe9fono"),e.qZA(),e._uU(21),e.qZA(),e.TgZ(22,"td",13)(23,"span",14),e._uU(24,"Estado"),e.qZA(),e._UZ(25,"p-tag",15),e.qZA(),e.TgZ(26,"td",13)(27,"button",16),e.NdJ("click",function(){const s=e.CHM(i).$implicit,c=e.oxw();return e.KtG(c.show(s.id))}),e.qZA(),e.TgZ(28,"button",17),e.NdJ("click",function(){const s=e.CHM(i).$implicit,c=e.oxw();return e.KtG(c.eliminar(s.id))}),e.qZA()()()}if(2&t){const i=a.$implicit,o=e.oxw();e.xp6(4),e.Oqu(i.nombre),e.xp6(4),e.Oqu(i.apellido),e.xp6(4),e.Oqu(e.lcZ(13,7,i.dni)),e.xp6(5),e.Oqu(i.email),e.xp6(4),e.Oqu(i.telefono),e.xp6(4),e.Q6J("value",i.estado?"activo":"inactivo")("severity",o.getSeverity(i.estado))}}function te(t,a){1&t&&(e.TgZ(0,"tr")(1,"td",18),e._uU(2,"No se encontraron registros"),e.qZA()()),2&t&&(e.xp6(1),e.uIk("colspan",6))}const ie=function(){return{"min-width":"20rem"}},oe=function(){return["nombre","apellido","dni","email"]},ne=function(){return[10,25,50]},le=[{path:"",children:[{path:"",component:(()=>{class t{constructor(i,o,n){this.clienteService=i,this.dialogService=o,this.confirmationService=n,this.clientes=[]}ngOnInit(){this.traerClientes()}traerClientes(){this.subscription=this.clienteService.traerClientes().subscribe(i=>{this.clientes=i.sort((o,n)=>n.id-o.id)})}show(i){this.ref=this.dialogService.open(x,{header:i?"Editar cliente":"Nuevo cliente",width:"70%",contentStyle:{overflow:"auto"},maximizable:!0,styleClass:"customer-dialog-form",data:i}),this.ref.onClose.subscribe(o=>{this.traerClientes()})}getSeverity(i){switch(i){case!0:return"success";case!1:return"danger";default:return""}}eliminar(i){this.confirmationService.confirm({message:"\xbfDesea eliminar al cliente?",header:"Confirmaci\xf3n",icon:"pi pi-exclamation-triangle",accept:()=>{this.clienteService.eliminarCliente(i).subscribe(o=>{p().fire(o.msg,"",o.icon),this.traerClientes()})}})}ngOnDestroy(){this.ref&&this.ref.close(),this.subscription.unsubscribe()}static#e=this.\u0275fac=function(o){return new(o||t)(e.Y36(h.$),e.Y36(u.xA),e.Y36(m.YP))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-tabla-clientes"]],features:[e._Bn([u.xA,m.YP])],decls:13,vars:10,consts:[[1,"card"],["dataKey","id","responsiveLayout","stack","currentPageReportTemplate","{first} al {last} de {totalRecords}",3,"value","tableStyle","paginator","rows","showCurrentPageReport","globalFilterFields","rowsPerPageOptions"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"confirmation"],[1,"flex","align-items-center","justify-content-between","my-0","py-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",3,"input"],["pButton","","pRipple","","icon","pi pi-plus","pTooltip","Nuevo cliente","tooltipPosition","left",1,"p-button-success","mr-2",3,"click"],[1,"text-center"],[1,"p-column-title"],[1,"uppercase",3,"value","severity"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-help",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-help",3,"click"],[1,"text-center",2,"color","grey"]],template:function(o,n){1&o&&(e._UZ(0,"app-tool-bar"),e.TgZ(1,"h1"),e._uU(2,"Clientes"),e.qZA(),e._UZ(3,"hr"),e.TgZ(4,"div",0)(5,"p-table",1,2),e.YNc(7,X,6,0,"ng-template",3),e.YNc(8,W,14,0,"ng-template",4),e.YNc(9,ee,29,9,"ng-template",5),e.YNc(10,te,3,1,"ng-template",6),e.qZA()(),e._UZ(11,"app-footer")(12,"p-confirmDialog",7)),2&o&&(e.xp6(5),e.Q6J("value",n.clientes)("tableStyle",e.DdM(7,ie))("paginator",n.clientes.length>10)("rows",5)("showCurrentPageReport",!0)("globalFilterFields",e.DdM(8,oe))("rowsPerPageOptions",e.DdM(9,ne)))},dependencies:[v.u,m.jx,Z.Hq,C.Q,K.iA,z.V,T.o,L.o,V.c,$.p],styles:["*[_ngcontent-%COMP%]{margin:15px}.card[_ngcontent-%COMP%]{border:1px solid var(--surface-border)!important;border-radius:12px!important}"]})}return t})()},{path:"form-clientes",component:x},{path:"**",redirectTo:"auth"}]}];let re=(()=>{class t{static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275mod=e.oAB({type:t});static#i=this.\u0275inj=e.cJS({imports:[g.Bz.forChild(le),g.Bz]})}return t})();var ae=l(4466),se=l(6867);let ce=(()=>{class t{static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275mod=e.oAB({type:t});static#i=this.\u0275inj=e.cJS({imports:[_.ez,r.UX,re,se.g,ae.m]})}return t})()}}]);