"use strict";(self.webpackChunksistema=self.webpackChunksistema||[]).push([[722],{7722:(We,U,l)=>{l.r(U),l.d(U,{ConfiguracionesModule:()=>Xe});var b=l(6895),T=l(4154),e=l(8256),z=l(629),D=l(8741),R=l(6526),B=l(4247),q=l(8783),p=l(4325),r=l(433),V=l(5226),g=l.n(V),v=l(9646),Z=l(4004),C=l(262),G=l(2340),L=l(529);let A=(()=>{class o{get empresa(){return{...this._empresa}}constructor(t){this.http=t,this.baseUrl=G.N.baseUrl}traerEmpresas(){return this.http.get(`${this.baseUrl}/empresa`).pipe((0,Z.U)(i=>i),(0,C.K)(i=>(0,v.of)(!1)))}traerUnaEmpresa(t){return this.http.get(`${this.baseUrl}/empresa/${t}`).pipe((0,Z.U)(n=>(this._empresa=n,n)),(0,C.K)(n=>(0,v.of)(!1)))}crearEmpresa(t){return this.http.post(`${this.baseUrl}/empresa`,t).pipe((0,Z.U)(n=>n),(0,C.K)(n=>(0,v.of)(n.error)))}modificarEmpresa(t){return this.http.put(`${this.baseUrl}/empresa/${t.id}`,t).pipe((0,Z.U)(n=>n),(0,C.K)(n=>(0,v.of)(n.error)))}static#e=this.\u0275fac=function(i){return new(i||o)(e.LFG(L.eN))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var f=l(3608),_=l(5593),h=l(1740),N=l(3520);function K(o,a){1&o&&(e.TgZ(0,"div"),e._uU(1," Nombre / raz\xf3n social requerido. "),e.qZA())}function $(o,a){1&o&&(e.TgZ(0,"div"),e._uU(1," El nombre / raz\xf3n social debe tener al menos 4 caracteres. "),e.qZA())}function j(o,a){if(1&o&&(e.TgZ(0,"div",15),e.YNc(1,K,2,0,"div",16),e.YNc(2,$,2,0,"div",16),e.qZA()),2&o){const t=e.oxw();let i,n;e.xp6(1),e.Q6J("ngIf",null==(i=t.miFormulario.get("nombre"))?null:i.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==(n=t.miFormulario.get("nombre"))?null:n.hasError("minlength"))}}const S=function(){return{margin:".5em",width:"9rem"}};let H=(()=>{class o{constructor(t,i,n,s){this.fb=t,this.empresaService=i,this.ref=n,this.config=s,this.miFormulario=this.fb.group({id:new r.NI({value:"",disabled:!1}),nombre:new r.NI({value:"",disabled:!1},[r.kI.required,r.kI.minLength(4)]),cuit:new r.NI({value:"",disabled:!1}),telefono:new r.NI({value:"",disabled:!1})}),this.edito=!1}ngOnInit(){const t=this.config.data;t&&(this.edito=!0,this.empresaService.traerUnaEmpresa(t).subscribe(i=>{this.miFormulario.patchValue(i)}))}guardar(){this.edito?(this.miFormulario.get("nombre")?.enable(),this.empresaService.modificarEmpresa(this.miFormulario.value).subscribe(t=>{g().fire(t.msg,"",t.icon),t.ok&&this.closeForm()})):(this.miFormulario.get("id")?.disable(),this.empresaService.crearEmpresa(this.miFormulario.value).subscribe(t=>{g().fire(t.msg,"",t.icon),t.ok&&this.closeForm()}))}closeForm(){this.edito=!1,this.ref.close()}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(r.qu),e.Y36(A),e.Y36(p.E7),e.Y36(p.S))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-formulario-empresas"]],decls:23,vars:9,consts:[["autocomplete","off",1,"pt-2",3,"formGroup","ngSubmit"],[1,"grid"],[1,"col-12","lg:col-6","p-3","m-0"],["htmlFor","nombre"],["pTooltip","Requerido","tooltipPosition","top",1,"required"],["pInputText","","id","nombre","formControlName","nombre","placeholder","Ingrese nombre / raz\xf3n social"],[1,"h-1rem"],["class","error-message",4,"ngIf"],["htmlFor","cuit"],["mask","99-99999999-9","formControlName","cuit","placeholder","99-99999999-9"],["htmlFor","telefono"],["id","telefono","mask","15 9999 9999","formControlName","telefono","placeholder","15 9999 9999"],[1,"text-center","col-12","p-3","m-0"],["label","Guardar","type","submit","icon","pi pi-check",3,"disabled"],["label","Cancelar","icon","pi pi-times","styleClass","p-button-secondary",3,"onClick"],[1,"error-message"],[4,"ngIf"]],template:function(i,n){if(1&i&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.guardar()}),e.TgZ(1,"div",1)(2,"div",2)(3,"label",3),e._uU(4,"Nombre / raz\xf3n social"),e.TgZ(5,"span",4),e._uU(6,"*"),e.qZA()(),e._UZ(7,"input",5),e.TgZ(8,"div",6),e.YNc(9,j,3,2,"div",7),e.qZA()(),e.TgZ(10,"div",2)(11,"label",8),e._uU(12,"CUIT"),e.qZA(),e._UZ(13,"p-inputMask",9),e.qZA(),e.TgZ(14,"div",2)(15,"label",10),e._uU(16,"Tel\xe9fono"),e.TgZ(17,"span",4),e._uU(18,"*"),e.qZA()(),e._UZ(19,"p-inputMask",11),e.qZA()(),e.TgZ(20,"div",12),e._UZ(21,"p-button",13),e.TgZ(22,"p-button",14),e.NdJ("onClick",function(){return n.closeForm()}),e.qZA()()()),2&i){let s;e.Q6J("formGroup",n.miFormulario),e.xp6(9),e.Q6J("ngIf",null==(s=n.miFormulario.get("nombre"))?null:s.touched),e.xp6(12),e.Akn(e.DdM(7,S)),e.Q6J("disabled",n.miFormulario.invalid),e.xp6(1),e.Akn(e.DdM(8,S))}},dependencies:[b.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,f.u,_.zx,h.o,N.vy]})}return o})();var d=l(805),F=l(308);let X=(()=>{class o{transform(t){return t.replace(/\D+/g,"").replace(/(\d{2})(\d{7})(\d)/,"$1-$2-$3")}static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275pipe=e.Yjl({name:"cuitFormat",type:o,pure:!0})}return o})();function W(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",6)(1,"span",7),e._UZ(2,"i",8),e.TgZ(3,"input",9),e.NdJ("input",function(n){e.CHM(t),e.oxw();const s=e.MAs(1);return e.KtG(s.filterGlobal(n.target.value,"contains"))}),e.qZA()(),e.TgZ(4,"span")(5,"button",10),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.show())}),e.qZA()()()}}function ee(o,a){1&o&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Nombre / Raz\xf3n social"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"CUIT"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Tel\xe9fono"),e.qZA(),e._UZ(7,"th"),e.qZA())}function te(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"span",11),e._uU(3,"Nombre"),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"span",11),e._uU(7,"CUIT"),e.qZA(),e._uU(8),e.ALo(9,"cuitFormat"),e.qZA(),e.TgZ(10,"td")(11,"span",11),e._uU(12,"Tel\xe9fono"),e.qZA(),e._uU(13),e.qZA(),e.TgZ(14,"td",12)(15,"button",13),e.NdJ("click",function(){const s=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.show(s.id))}),e.qZA()()()}if(2&o){const t=a.$implicit;e.xp6(4),e.Oqu(t.nombre),e.xp6(4),e.Oqu(e.lcZ(9,3,t.cuit?t.cuit:"-")),e.xp6(5),e.Oqu(t.telefono?t.telefono:"-")}}function oe(o,a){1&o&&(e.TgZ(0,"tr")(1,"td",14),e._uU(2,"No se encontraron registros"),e.qZA()()),2&o&&(e.xp6(1),e.uIk("colspan",4))}const ie=function(){return{"min-width":"20rem"}},ne=function(){return["nombre","cuit","telefono"]},re=function(){return[10,25,50]};let I=(()=>{class o{constructor(t,i){this.empresaService=t,this.dialogService=i,this.empresas=[]}ngOnInit(){this.traerEmpresas()}traerEmpresas(){this.subscription=this.empresaService.traerEmpresas().subscribe(t=>{this.empresas=t.sort((i,n)=>n.id-i.id)})}show(t){this.ref=this.dialogService.open(H,{header:t?"Editar empresa":"Nueva empresa",width:"70%",contentStyle:{overflow:"auto"},maximizable:!0,styleClass:"customer-dialog-form",data:t}),this.ref.onClose.subscribe(i=>{this.traerEmpresas()})}ngOnDestroy(){this.ref&&this.ref.close(),this.subscription.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(A),e.Y36(p.xA))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-tabla-empresas"]],features:[e._Bn([p.xA])],decls:6,vars:10,consts:[["dataKey","id","responsiveLayout","stack","currentPageReportTemplate","{first} al {last} de {totalRecords}",3,"value","tableStyle","paginator","rows","showCurrentPageReport","globalFilterFields","rowsPerPageOptions"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"flex","align-items-center","justify-content-between","my-0","py-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",3,"input"],["pButton","","pRipple","","icon","pi pi-plus","pTooltip","Nueva empresa","tooltipPosition","left",1,"p-button-success","mr-2",3,"click"],[1,"p-column-title"],[1,"text-center"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-help",3,"click"],[1,"text-center",2,"color","grey"]],template:function(i,n){1&i&&(e.TgZ(0,"p-table",0,1),e.YNc(2,W,6,0,"ng-template",2),e.YNc(3,ee,8,0,"ng-template",3),e.YNc(4,te,16,5,"ng-template",4),e.YNc(5,oe,3,1,"ng-template",5),e.qZA()),2&i&&e.Q6J("value",n.empresas)("tableStyle",e.DdM(7,ie))("paginator",n.empresas.length>10)("rows",5)("showCurrentPageReport",!0)("globalFilterFields",e.DdM(8,ne))("rowsPerPageOptions",e.DdM(9,re))},dependencies:[f.u,d.jx,_.Hq,F.iA,h.o,X],styles:["*[_ngcontent-%COMP%]{margin:15px}"]})}return o})();var x=l(248),y=l(369),E=l(2210),P=l(1167);function ae(o,a){1&o&&(e.TgZ(0,"div"),e._uU(1," Empresa requerida. "),e.qZA())}function se(o,a){if(1&o&&(e.TgZ(0,"div",21),e.YNc(1,ae,2,0,"div",17),e.qZA()),2&o){const t=e.oxw();let i;e.xp6(1),e.Q6J("ngIf",null==(i=t.miFormulario.get("idEmpresa"))?null:i.hasError("required"))}}function le(o,a){1&o&&(e.TgZ(0,"div"),e._uU(1," Nombre "),e.qZA())}function ue(o,a){1&o&&(e.TgZ(0,"div"),e._uU(1," El nombre debe tener al menos 4 caracteres. "),e.qZA())}function pe(o,a){if(1&o&&(e.TgZ(0,"div",21),e.YNc(1,le,2,0,"div",17),e.YNc(2,ue,2,0,"div",17),e.qZA()),2&o){const t=e.oxw();let i,n;e.xp6(1),e.Q6J("ngIf",null==(i=t.miFormulario.get("nombre"))?null:i.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==(n=t.miFormulario.get("nombre"))?null:n.hasError("minlength"))}}function ce(o,a){1&o&&(e.TgZ(0,"div"),e._uU(1," El tel\xe9fono no es v\xe1lido. "),e.qZA())}function me(o,a){if(1&o&&(e.TgZ(0,"div",21),e.YNc(1,ce,2,0,"div",17),e.qZA()),2&o){const t=e.oxw();let i;e.xp6(1),e.Q6J("ngIf",null==(i=t.miFormulario.get("telefono"))?null:i.hasError("minlength"))}}function de(o,a){1&o&&(e.TgZ(0,"div"),e._uU(1," El email no es v\xe1lido. "),e.qZA())}function ge(o,a){if(1&o&&(e.TgZ(0,"div",21),e.YNc(1,de,2,0,"div",17),e.qZA()),2&o){const t=e.oxw();let i;e.xp6(1),e.Q6J("ngIf",null==(i=t.miFormulario.get("email"))?null:i.hasError("email"))}}function fe(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",22)(2,"label",23),e._uU(3,"Estado"),e.qZA(),e._UZ(4,"p-confirmPopup"),e.TgZ(5,"p-toggleButton",24),e.NdJ("onChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.confirm(n,"estado"))}),e.qZA()(),e.BQk()}}const w=function(){return{margin:".5em",width:"9rem"}};let _e=(()=>{class o{constructor(t,i,n,s,u,c){this.fb=t,this.ref=i,this.config=n,this.confirmationService=s,this.sucursalService=u,this.empresaService=c,this.edito=!1,this.miFormulario=this.fb.group({id:new r.NI({value:"",disabled:!1}),nombre:new r.NI({value:"",disabled:!1},[r.kI.required,r.kI.minLength(4)]),direccion:new r.NI({value:"",disabled:!1}),telefono:new r.NI({value:"",disabled:!1}),email:new r.NI({value:"",disabled:!1},[r.kI.email]),estado:new r.NI({value:!0,disabled:!1}),idEmpresa:new r.NI({value:null,disabled:!1},[r.kI.required])}),this.empresaService.traerEmpresas().subscribe(m=>{this.empresas=m})}ngOnInit(){const t=this.config.data;t&&(this.edito=!0,this.sucursalService.traerUnaSucursal(t).subscribe(i=>{this.miFormulario.patchValue(i)}))}confirm(t,i){this.confirmationService.confirm({target:t.originalEvent.target,message:"\xbfCancelar cambio?",icon:"pi pi-exclamation-triangle",defaultFocus:"none",accept:()=>{this.miFormulario.get(i)?.setValue(!t.checked)}})}guardar(){this.edito?this.miFormulario.get("nombre")?.enable():this.miFormulario.get("id")?.disable(),this.ref.close({edito:this.edito,data:this.miFormulario.value}),this.edito=!1}closeForm(){this.edito=!1,this.ref.close()}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(r.qu),e.Y36(p.E7),e.Y36(p.S),e.Y36(d.YP),e.Y36(x.f),e.Y36(A))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-formulario-sucursales"]],features:[e._Bn([d.YP])],decls:38,vars:16,consts:[["autocomplete","off",1,"pt-2",3,"formGroup","ngSubmit"],[1,"grid"],[1,"col-12","lg:col-6","p-3","m-0"],["htmlFor","empresa"],["pTooltip","Requerido","tooltipPosition","top",1,"required"],["formControlName","idEmpresa","optionLabel","nombre","optionValue","id","filterBy","nombre","placeholder","Seleccione Empresa","appendTo","body","emptyFilterMessage","Sin resultados","emptyMessage","Sin resultados",3,"options","filter","showClear"],[1,"h-1rem"],["class","error-message",4,"ngIf"],["htmlFor","nombre"],["pInputText","","id","nombre","formControlName","nombre","placeholder","Ingrese nombre"],[1,"col-12","p-3","m-0"],["htmlFor","direccion"],["pInputText","","id","direccion","formControlName","direccion","placeholder","Ingrese direcci\xf3n"],["htmlFor","telefono"],["id","telefono","mask","15 9999 9999","formControlName","telefono","placeholder","15 9999 9999"],["htmlFor","email"],["pInputText","","id","email","formControlName","email","placeholder","Ingrese email"],[4,"ngIf"],[1,"text-center","col-12","p-3","m-0"],["label","Guardar","type","submit","icon","pi pi-check",3,"disabled"],["label","Cancelar","icon","pi pi-times","styleClass","p-button-secondary",3,"onClick"],[1,"error-message"],[1,"flex","flex-column","col-12","lg:col-6","p-3","m-0"],["htmlFor","estado"],["formControlName","estado","onLabel","ACTIVO","offLabel","INACTIVO",3,"onChange"]],template:function(i,n){if(1&i&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.guardar()}),e.TgZ(1,"div",1)(2,"div",2)(3,"label",3),e._uU(4,"Empresa"),e.TgZ(5,"span",4),e._uU(6,"*"),e.qZA()(),e._UZ(7,"p-dropdown",5),e.TgZ(8,"div",6),e.YNc(9,se,2,1,"div",7),e.qZA()(),e.TgZ(10,"div",2)(11,"label",8),e._uU(12,"Nombre"),e.TgZ(13,"span",4),e._uU(14,"*"),e.qZA()(),e._UZ(15,"input",9),e.TgZ(16,"div",6),e.YNc(17,pe,3,2,"div",7),e.qZA()(),e.TgZ(18,"div",10)(19,"label",11),e._uU(20,"Direcci\xf3n"),e.qZA(),e._UZ(21,"input",12),e.qZA(),e.TgZ(22,"div",2)(23,"label",13),e._uU(24,"Tel\xe9fono"),e.qZA(),e._UZ(25,"p-inputMask",14),e.TgZ(26,"div",6),e.YNc(27,me,2,1,"div",7),e.qZA()(),e.TgZ(28,"div",2)(29,"label",15),e._uU(30,"Email"),e.qZA(),e._UZ(31,"input",16),e.TgZ(32,"div",6),e.YNc(33,ge,2,1,"div",7),e.qZA()(),e.YNc(34,fe,6,0,"ng-container",17),e.qZA(),e.TgZ(35,"div",18),e._UZ(36,"p-button",19),e.TgZ(37,"p-button",20),e.NdJ("onClick",function(){return n.closeForm()}),e.qZA()()()),2&i){let s,u,c,m;e.Q6J("formGroup",n.miFormulario),e.xp6(7),e.Q6J("options",n.empresas)("filter",!0)("showClear",!0),e.xp6(2),e.Q6J("ngIf",null==(s=n.miFormulario.get("idEmpresa"))?null:s.touched),e.xp6(8),e.Q6J("ngIf",null==(u=n.miFormulario.get("nombre"))?null:u.touched),e.xp6(10),e.Q6J("ngIf",null==(c=n.miFormulario.get("telefono"))?null:c.touched),e.xp6(6),e.Q6J("ngIf",null==(m=n.miFormulario.get("email"))?null:m.touched),e.xp6(1),e.Q6J("ngIf",n.edito),e.xp6(2),e.Akn(e.DdM(14,w)),e.Q6J("disabled",n.miFormulario.invalid),e.xp6(1),e.Akn(e.DdM(15,w))}},dependencies:[b.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,f.u,_.zx,y.P,h.o,E.Lt,P.CO,N.vy]})}return o})();var J=l(6679);function he(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",6)(1,"span",7),e._UZ(2,"i",8),e.TgZ(3,"input",9),e.NdJ("input",function(n){e.CHM(t),e.oxw();const s=e.MAs(1);return e.KtG(s.filterGlobal(n.target.value,"contains"))}),e.qZA()(),e.TgZ(4,"span")(5,"button",10),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.show())}),e.qZA()()()}}function be(o,a){1&o&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Nombre"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Tel\xe9fono"),e.qZA(),e.TgZ(5,"th",11),e._uU(6,"Estado"),e.qZA(),e._UZ(7,"th"),e.qZA())}function Te(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"span",12),e._uU(3,"Nombre"),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"span",12),e._uU(7,"Tel\xe9fono"),e.qZA(),e._uU(8),e.qZA(),e.TgZ(9,"td",11)(10,"span",12),e._uU(11,"Estado"),e.qZA(),e._UZ(12,"p-tag",13),e.qZA(),e.TgZ(13,"td",11)(14,"button",14),e.NdJ("click",function(){const s=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.show(s.id))}),e.qZA()()()}if(2&o){const t=a.$implicit,i=e.oxw();e.xp6(4),e.Oqu(t.nombre),e.xp6(4),e.Oqu(t.telefono?t.telefono:"-"),e.xp6(4),e.Q6J("value",t.estado?"ACTIVO":"INACTIVO")("severity",i.getSeverity(t.estado))}}function ve(o,a){1&o&&(e.TgZ(0,"tr")(1,"td",15),e._uU(2,"No se encontraron registros"),e.qZA()()),2&o&&(e.xp6(1),e.uIk("colspan",4))}const Ze=function(){return{"min-width":"20rem"}},Ce=function(){return["nombre","apellido","email","estado"]},xe=function(){return[10,25,50]};let Y=(()=>{class o{constructor(t,i){this.sucursalService=t,this.dialogService=i,this.sucursales=[]}ngOnInit(){this.traerSucursales()}traerSucursales(){this.subscription=this.sucursalService.traerSucursales().subscribe(t=>{this.sucursales=t.sort((i,n)=>n.id-i.id)})}show(t){this.ref=this.dialogService.open(_e,{header:t?"Editar sucursal":"Nueva sucursal",width:"70%",contentStyle:{overflow:"auto"},maximizable:!0,styleClass:"customer-dialog-form",data:t}),this.ref.onClose.subscribe(i=>{i&&(i.edito?this.sucursalService.modificarSucursal(i.data).subscribe(n=>{g().fire(n.msg,"",n.icon),this.traerSucursales()}):this.sucursalService.crearSucursal(i.data).subscribe(n=>{g().fire(n.msg,"",n.icon),this.traerSucursales()}))})}getSeverity(t){switch(t){case!0:return"success";case!1:return"danger";default:return""}}ngOnDestroy(){this.ref&&this.ref.close(),this.subscription.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(x.f),e.Y36(p.xA))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-tabla-sucursales"]],features:[e._Bn([p.xA])],decls:6,vars:10,consts:[["dataKey","id","responsiveLayout","stack","currentPageReportTemplate","{first} al {last} de {totalRecords}",3,"value","tableStyle","paginator","rows","showCurrentPageReport","globalFilterFields","rowsPerPageOptions"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"flex","align-items-center","justify-content-between","my-0","py-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",3,"input"],["pButton","","pRipple","","icon","pi pi-plus","pTooltip","Nuevo usuario","tooltipPosition","left",1,"p-button-success","mr-2",3,"click"],[1,"text-center"],[1,"p-column-title"],[1,"uppercase",3,"value","severity"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-help",3,"click"],[1,"text-center",2,"color","grey"]],template:function(i,n){1&i&&(e.TgZ(0,"p-table",0,1),e.YNc(2,he,6,0,"ng-template",2),e.YNc(3,be,8,0,"ng-template",3),e.YNc(4,Te,15,4,"ng-template",4),e.YNc(5,ve,3,1,"ng-template",5),e.qZA()),2&i&&e.Q6J("value",n.sucursales)("tableStyle",e.DdM(7,Ze))("paginator",n.sucursales.length>10)("rows",5)("showCurrentPageReport",!0)("globalFilterFields",e.DdM(8,Ce))("rowsPerPageOptions",e.DdM(9,xe))},dependencies:[f.u,d.jx,_.Hq,F.iA,J.V,h.o],styles:["*[_ngcontent-%COMP%]{margin:15px}"]})}return o})();var M=l(7101),Ae=l(7248);function Fe(o,a){1&o&&(e.TgZ(0,"div"),e._uU(1," Sucursal requerida. "),e.qZA())}function Ue(o,a){if(1&o&&(e.TgZ(0,"div",23),e.YNc(1,Fe,2,0,"div",19),e.qZA()),2&o){const t=e.oxw();let i;e.xp6(1),e.Q6J("ngIf",null==(i=t.miFormulario.get("idSucursal"))?null:i.hasError("required"))}}function qe(o,a){1&o&&(e.TgZ(0,"div"),e._uU(1," Nombre requerido. "),e.qZA())}function Ne(o,a){1&o&&(e.TgZ(0,"div"),e._uU(1," El nombre debe tener al menos 4 caracteres. "),e.qZA())}function Se(o,a){if(1&o&&(e.TgZ(0,"div",23),e.YNc(1,qe,2,0,"div",19),e.YNc(2,Ne,2,0,"div",19),e.qZA()),2&o){const t=e.oxw();let i,n;e.xp6(1),e.Q6J("ngIf",null==(i=t.miFormulario.get("nombre"))?null:i.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==(n=t.miFormulario.get("nombre"))?null:n.hasError("minlength"))}}function Ie(o,a){1&o&&(e.TgZ(0,"div"),e._uU(1," Plazo de validez requerido. "),e.qZA())}function ye(o,a){if(1&o&&(e.TgZ(0,"div",23),e.YNc(1,Ie,2,0,"div",19),e.qZA()),2&o){const t=e.oxw();let i;e.xp6(1),e.Q6J("ngIf",null==(i=t.miFormulario.get("plazoValidez"))?null:i.hasError("required"))}}function Ee(o,a){1&o&&(e.TgZ(0,"div"),e._uU(1," D\xedas asistencia requerido. "),e.qZA())}function Pe(o,a){if(1&o&&(e.TgZ(0,"div",23),e.YNc(1,Ee,2,0,"div",19),e.qZA()),2&o){const t=e.oxw();let i;e.xp6(1),e.Q6J("ngIf",null==(i=t.miFormulario.get("diasAsistencia"))?null:i.hasError("required"))}}function we(o,a){1&o&&(e.TgZ(0,"div"),e._uU(1," Importe requerido. "),e.qZA())}function Je(o,a){if(1&o&&(e.TgZ(0,"div",23),e.YNc(1,we,2,0,"div",19),e.qZA()),2&o){const t=e.oxw();let i;e.xp6(1),e.Q6J("ngIf",null==(i=t.miFormulario.get("importe"))?null:i.hasError("required"))}}function Ye(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",24)(2,"label",25),e._uU(3,"Estado"),e.qZA(),e._UZ(4,"p-confirmPopup"),e.TgZ(5,"p-toggleButton",26),e.NdJ("onChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.confirm(n,"estado"))}),e.qZA()(),e.BQk()}}const Q=function(){return{margin:".5em",width:"9rem"}};let Me=(()=>{class o{constructor(t,i,n,s,u,c){this.ref=t,this.config=i,this.fb=n,this.planService=s,this.sucursalService=u,this.confirmationService=c,this.miFormulario=this.fb.group({id:new r.NI({value:"",disabled:!0},r.kI.required),nombre:new r.NI("",[r.kI.required,r.kI.minLength(4)]),descripcion:new r.NI(""),importe:new r.NI(null,r.kI.required),diasAsistencia:new r.NI(null,r.kI.required),plazoValidez:new r.NI(null,r.kI.required),estado:new r.NI(!0),idSucursal:new r.NI("",r.kI.required)}),this.edito=!1,this.sucursalService.traerSucursales().subscribe(m=>{this.sucursales=m})}ngOnInit(){const t=this.config.data;t&&(this.edito=!0,this.miFormulario.get("diasAsistencia")?.disable(),this.planService.traerUnPlan(t).subscribe(i=>{this.miFormulario.patchValue(i)}))}confirm(t,i){this.confirmationService.confirm({target:t.originalEvent.target,message:"\xbfCancelar cambio?",icon:"pi pi-exclamation-triangle",defaultFocus:"none",accept:()=>{this.miFormulario.get(i)?.setValue(!t.checked)}})}guardar(){this.edito?(this.miFormulario.get("id")?.enable(),this.miFormulario.get("diasAsistencia")?.enable(),this.planService.modificarPlan(this.miFormulario.value).subscribe(t=>{g().fire(t.msg,"",t.icon),t.ok&&this.closeForm()})):this.planService.crearPlan(this.miFormulario.value).subscribe(t=>{g().fire(t.msg,"",t.icon),t.ok&&this.closeForm()})}closeForm(){this.edito=!1,this.ref.close()}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(p.E7),e.Y36(p.S),e.Y36(r.qu),e.Y36(M.D),e.Y36(x.f),e.Y36(d.YP))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-formulario-planes"]],features:[e._Bn([d.YP])],decls:50,vars:27,consts:[["autocomplete","off",1,"pt-2",3,"formGroup","ngSubmit"],[1,"grid"],[1,"col-12","lg:col-6","p-3","m-0"],["htmlFor","idSucursal"],["pTooltip","Requerido","tooltipPosition","top",1,"required"],["formControlName","idSucursal","optionLabel","nombre","optionValue","id","filterBy","nombre","placeholder","Seleccione sucursal","appendTo","body","emptyFilterMessage","Sin resultados","emptyMessage","Sin resultados",3,"options","filter","showClear"],[1,"h-1rem"],["class","error-message",4,"ngIf"],["htmlFor","nombre"],["pInputText","","id","nombre","formControlName","nombre","placeholder","Ingrese nombre"],[1,"col-12","p-3","m-0"],["htmlFor","descripcion"],["pInputText","","id","descripcion","formControlName","descripcion","placeholder","Ingrese descripci\xf3n"],["htmlFor","plazoValidez"],["inputId","plazoValidez","value","1","formControlName","plazoValidez","placeholder","Ingrese plazo Ej: 1, 7, 15, 30",3,"min","max"],["htmlFor","diasAsistencia"],["inputId","diasAsistencia","value","1","formControlName","diasAsistencia","placeholder","Ingrese asistencia",3,"min","max"],["htmlFor","importe"],["inputId","importe","formControlName","importe","placeholder","$ 0,00","mode","currency","currency","ARS","locale","es-AR"],[4,"ngIf"],[1,"text-center","col-12","p-3","m-0"],["label","Guardar","type","submit","icon","pi pi-check",3,"disabled"],["label","Cancelar","icon","pi pi-times","styleClass","p-button-secondary",3,"onClick"],[1,"error-message"],[1,"flex","flex-column","col-12","lg:col-6","p-3","m-0"],["htmlFor","estado"],["formControlName","estado","onLabel","ACTIVO","offLabel","INACTIVO",3,"onChange"]],template:function(i,n){if(1&i&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.guardar()}),e.TgZ(1,"div",1)(2,"div",2)(3,"label",3),e._uU(4,"Sucursal"),e.TgZ(5,"span",4),e._uU(6,"*"),e.qZA()(),e._UZ(7,"p-dropdown",5),e.TgZ(8,"div",6),e.YNc(9,Ue,2,1,"div",7),e.qZA()(),e.TgZ(10,"div",2)(11,"label",8),e._uU(12,"Nombre"),e.TgZ(13,"span",4),e._uU(14,"*"),e.qZA()(),e._UZ(15,"input",9),e.TgZ(16,"div",6),e.YNc(17,Se,3,2,"div",7),e.qZA()(),e.TgZ(18,"div",10)(19,"label",11),e._uU(20,"Descripci\xf3n"),e.qZA(),e._UZ(21,"input",12),e.qZA(),e.TgZ(22,"div",2)(23,"label",13),e._uU(24,"Plazo de validez"),e.TgZ(25,"span",4),e._uU(26,"*"),e.qZA()(),e._UZ(27,"p-inputNumber",14),e.TgZ(28,"div",6),e.YNc(29,ye,2,1,"div",7),e.qZA()(),e.TgZ(30,"div",2)(31,"label",15),e._uU(32,"D\xedas asistencia"),e.TgZ(33,"span",4),e._uU(34,"*"),e.qZA()(),e._UZ(35,"p-inputNumber",16),e.TgZ(36,"div",6),e.YNc(37,Pe,2,1,"div",7),e.qZA()(),e.TgZ(38,"div",2)(39,"label",17),e._uU(40,"Importe"),e.TgZ(41,"span",4),e._uU(42,"*"),e.qZA()(),e._UZ(43,"p-inputNumber",18),e.TgZ(44,"div",6),e.YNc(45,Je,2,1,"div",7),e.qZA()(),e.YNc(46,Ye,6,0,"ng-container",19),e.qZA(),e.TgZ(47,"div",20),e._UZ(48,"p-button",21),e.TgZ(49,"p-button",22),e.NdJ("onClick",function(){return n.closeForm()}),e.qZA()()()),2&i){let s,u,c,m,O;e.Q6J("formGroup",n.miFormulario),e.xp6(7),e.Q6J("options",n.sucursales)("filter",!0)("showClear",!0),e.xp6(2),e.Q6J("ngIf",null==(s=n.miFormulario.get("idSucursal"))?null:s.touched),e.xp6(8),e.Q6J("ngIf",null==(u=n.miFormulario.get("nombre"))?null:u.touched),e.xp6(10),e.Udp("width",100,"%"),e.Q6J("min",1)("max",1e3),e.xp6(2),e.Q6J("ngIf",null==(c=n.miFormulario.get("plazoValidez"))?null:c.touched),e.xp6(6),e.Udp("width",100,"%"),e.Q6J("min",1)("max",7),e.xp6(2),e.Q6J("ngIf",null==(m=n.miFormulario.get("diasAsistencia"))?null:m.touched),e.xp6(6),e.Udp("width",100,"%"),e.xp6(2),e.Q6J("ngIf",null==(O=n.miFormulario.get("importe"))?null:O.touched),e.xp6(1),e.Q6J("ngIf",n.edito),e.xp6(2),e.Akn(e.DdM(25,Q)),e.Q6J("disabled",n.miFormulario.invalid),e.xp6(1),e.Akn(e.DdM(26,Q))}},dependencies:[b.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,f.u,_.zx,y.P,h.o,E.Lt,P.CO,Ae.Rn]})}return o})();function Qe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",6)(1,"span",7),e._UZ(2,"i",8),e.TgZ(3,"input",9),e.NdJ("input",function(n){e.CHM(t),e.oxw();const s=e.MAs(1);return e.KtG(s.filterGlobal(n.target.value,"contains"))}),e.qZA()(),e.TgZ(4,"span")(5,"button",10),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.show())}),e.qZA()()()}}function ke(o,a){1&o&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Sucursal"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Nombre"),e.qZA(),e.TgZ(5,"th",11),e._uU(6,"Plazo validez"),e.qZA(),e.TgZ(7,"th",11),e._uU(8,"D\xedas asistencia"),e.qZA(),e.TgZ(9,"th",11),e._uU(10,"Importe"),e.qZA(),e.TgZ(11,"th",12),e._uU(12,"Estado"),e.qZA(),e._UZ(13,"th"),e.qZA())}function Oe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"span",13),e._uU(3,"Sucursal"),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"span",13),e._uU(7,"Nombre"),e.qZA(),e.TgZ(8,"div",14),e._uU(9),e.qZA()(),e.TgZ(10,"td",11)(11,"span",13),e._uU(12,"Plazo validez"),e.qZA(),e._uU(13),e.qZA(),e.TgZ(14,"td",11)(15,"span",13),e._uU(16,"D\xedas asistencia"),e.qZA(),e._uU(17),e.qZA(),e.TgZ(18,"td",11)(19,"span",13),e._uU(20,"Importe"),e.qZA(),e._uU(21),e.qZA(),e.TgZ(22,"td",12)(23,"span",13),e._uU(24,"Estado"),e.qZA(),e._UZ(25,"p-tag",15),e.qZA(),e.TgZ(26,"td",12)(27,"button",16),e.NdJ("click",function(){const s=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.show(s.id))}),e.qZA()()()}if(2&o){const t=a.$implicit,i=e.oxw();e.xp6(4),e.Oqu(i.getNombreSucursal(t.idSucursal)),e.xp6(4),e.s9C("pTooltip",t.descripcion),e.xp6(1),e.Oqu(t.nombre),e.xp6(4),e.Oqu(t.plazoValidez),e.xp6(4),e.Oqu(t.diasAsistencia),e.xp6(4),e.hij("$",t.importe,""),e.xp6(4),e.Q6J("value",t.estado?"ACTIVO":"INACTIVO")("severity",i.getSeverity(t.estado))}}function ze(o,a){1&o&&(e.TgZ(0,"tr")(1,"td",17),e._uU(2,"No se encontraron registros"),e.qZA()()),2&o&&(e.xp6(1),e.uIk("colspan",6))}const De=function(){return{"min-width":"20rem"}},Re=function(){return["nombre"]},Be=function(){return[10,25,50]};let k=(()=>{class o{constructor(t,i,n){this.dialogService=t,this.planService=i,this.sucursalService=n,this.planes=[],this.sucursalService.traerSucursales().subscribe(s=>{this.sucursales=s})}ngOnInit(){this.traerPlanes()}traerPlanes(){this.subscription=this.planService.traerPlanes().subscribe(t=>{this.planes=t.sort((i,n)=>n.id-i.id)})}show(t){this.ref=this.dialogService.open(Me,{header:t?"Editar plan":"Nuevo plan",width:"70%",contentStyle:{overflow:"auto"},maximizable:!0,styleClass:"customer-dialog-form",data:t}),this.ref.onClose.subscribe(()=>{this.traerPlanes()})}getSeverity(t){switch(t){case!0:return"success";case!1:return"danger";default:return""}}getNombreSucursal(t){return this.sucursales.filter(n=>n.id===t)[0].nombre}ngOnDestroy(){this.ref&&this.ref.close(),this.subscription.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(p.xA),e.Y36(M.D),e.Y36(x.f))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-tabla-planes"]],features:[e._Bn([p.xA])],decls:6,vars:10,consts:[["dataKey","id","responsiveLayout","stack","currentPageReportTemplate","{first} al {last} de {totalRecords}",3,"value","tableStyle","paginator","rows","showCurrentPageReport","globalFilterFields","rowsPerPageOptions"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"flex","align-items-center","justify-content-between","my-0","py-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",3,"input"],["pButton","","pRipple","","icon","pi pi-plus","pTooltip","Nuevo plan","tooltipPosition","left",1,"p-button-success","mr-2",3,"click"],[1,"text-right"],[1,"text-center"],[1,"p-column-title"],["tooltipPosition","top",1,"m-0","p-0","cursor-pointer",3,"pTooltip"],[1,"uppercase",3,"value","severity"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-help",3,"click"],[1,"text-center",2,"color","grey"]],template:function(i,n){1&i&&(e.TgZ(0,"p-table",0,1),e.YNc(2,Qe,6,0,"ng-template",2),e.YNc(3,ke,14,0,"ng-template",3),e.YNc(4,Oe,28,8,"ng-template",4),e.YNc(5,ze,3,1,"ng-template",5),e.qZA()),2&i&&e.Q6J("value",n.planes)("tableStyle",e.DdM(7,De))("paginator",n.planes.length>10)("rows",5)("showCurrentPageReport",!0)("globalFilterFields",e.DdM(8,Re))("rowsPerPageOptions",e.DdM(9,Be))},dependencies:[f.u,d.jx,_.Hq,F.iA,J.V,h.o],styles:["*[_ngcontent-%COMP%]{margin:15px}"]})}return o})();function Ve(o,a){1&o&&e._UZ(0,"app-tabla-empresas")}function Ge(o,a){1&o&&e._UZ(0,"app-tabla-sucursales")}function Le(o,a){1&o&&e._UZ(0,"app-tabla-planes")}const Ke=[{path:"",component:(()=>{class o{constructor(t,i,n){this.router=t,this.route=i,this.authService=n}onTabChange(t){switch(t.index){case 0:this.router.navigate(["configuracion/empresas"]);break;case 1:this.router.navigate(["configuracion/sucursales"]);break;case 2:this.router.navigate(["configuracion/planes"])}}isTabActive(t){return this.route.snapshot.firstChild?.routeConfig?.path===t}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(T.F0),e.Y36(T.gz),e.Y36(z.e))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-configuracion"]],decls:21,vars:6,consts:[[1,"card"],[3,"onChange"],["header","EMPRESAS",3,"selected"],[4,"ngIf"],["header","SUCURSALES",3,"selected"],["header","PLANES",3,"selected"],["header","MERCADO PAGO"],["header","Credenciales",1,"mt-0","pt-0"],["header","SISTEMA"],["header","Configuralo a tu gusto",1,"mt-0","pt-0"]],template:function(i,n){1&i&&(e._UZ(0,"app-tool-bar"),e.TgZ(1,"h1"),e._uU(2,"Configuraci\xf3n"),e.qZA(),e._UZ(3,"hr"),e.TgZ(4,"div",0)(5,"p-tabView",1),e.NdJ("onChange",function(u){return n.onTabChange(u)}),e.TgZ(6,"p-tabPanel",2),e.YNc(7,Ve,1,0,"app-tabla-empresas",3),e.qZA(),e.TgZ(8,"p-tabPanel",4),e.YNc(9,Ge,1,0,"app-tabla-sucursales",3),e.qZA(),e.TgZ(10,"p-tabPanel",5),e.YNc(11,Le,1,0,"app-tabla-planes",3),e.qZA(),e.TgZ(12,"p-tabPanel",6)(13,"p-card",7)(14,"h3"),e._uU(15," Pr\xf3ximamente! "),e.qZA()()(),e.TgZ(16,"p-tabPanel",8)(17,"p-card",9)(18,"h3"),e._uU(19," Pr\xf3ximamente! "),e.qZA()()()()(),e._UZ(20,"app-footer")),2&i&&(e.xp6(6),e.Q6J("selected",n.isTabActive("empresas")),e.xp6(1),e.Q6J("ngIf",n.isTabActive("empresas")),e.xp6(1),e.Q6J("selected",n.isTabActive("sucursales")),e.xp6(1),e.Q6J("ngIf",n.isTabActive("sucursales")),e.xp6(1),e.Q6J("selected",n.isTabActive("planes")),e.xp6(1),e.Q6J("ngIf",n.isTabActive("planes")))},dependencies:[b.O5,D.o,R.c,B.Z,q.xf,q.x4,I,Y,k],styles:["*[_ngcontent-%COMP%]{margin:15px}.card[_ngcontent-%COMP%]{border:1px solid var(--surface-border)!important;border-radius:12px!important}"]})}return o})(),children:[{path:"",redirectTo:"empresas",pathMatch:"full"},{path:"empresas",component:I},{path:"sucursales",component:Y},{path:"planes",component:k},{path:"**",redirectTo:"auth"}]}];let $e=(()=>{class o{static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({imports:[T.Bz.forChild(Ke),T.Bz]})}return o})();var je=l(4466),He=l(6867);let Xe=(()=>{class o{static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({imports:[b.ez,r.UX,$e,je.m,He.g]})}return o})()}}]);