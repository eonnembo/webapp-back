"use strict";(self.webpackChunksistema=self.webpackChunksistema||[]).push([[502],{6526:(U,d,e)=>{e.d(d,{c:()=>t});var o=e(8256);let t=(()=>{class c{currentYear(){return(new Date).getFullYear()}static#t=this.\u0275fac=function(l){return new(l||c)};static#e=this.\u0275cmp=o.Xpm({type:c,selectors:[["app-footer"]],decls:4,vars:1,consts:[[1,"footer"],[1,"container"]],template:function(l,g){1&l&&(o.TgZ(0,"footer",0)(1,"div",1)(2,"p"),o._uU(3),o.qZA()()()),2&l&&(o.xp6(3),o.hij("Todos los derechos reservados \xa9 ",g.currentYear(),""))}})}return c})()},8741:(U,d,e)=>{e.d(d,{o:()=>B});var o=e(5656),t=e(8256),c=e(629),v=e(248),h=e(7117),l=e(6895),g=e(1383),i=e(4154),_=e(805),r=e(3214),a=e(3930);const s=function(){return{width:"100%",height:"100%"}};function b(n,C){1&n&&(t.TgZ(0,"p-scrollPanel")(1,"div",3)(2,"h3",4),t._uU(3," Dashboard "),t.qZA()(),t.TgZ(4,"div",5)(5,"h3",4),t._uU(6," Clientes "),t.qZA()(),t.TgZ(7,"div",6)(8,"h3",4),t._uU(9," Servicios "),t.qZA()()()),2&n&&t.Akn(t.DdM(2,s))}let P=(()=>{class n{constructor(){this.sidebarVisible=!1}ngOnInit(){}static#t=this.\u0275fac=function(u){return new(u||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-menu"]],decls:3,vars:1,consts:[[1,"p-0","m-0",3,"visible","visibleChange"],["pTemplate","content"],[1,"pi","pi-bars",2,"font-size","1.5rem","color","white","cursor","pointer",3,"click"],["routerLink","/dashboard",1,"line-menu","cursor-pointer"],[1,"uppercase"],["routerLink","/clientes",1,"line-menu","cursor-pointer"],["routerLink","/servicios",1,"line-menu","cursor-pointer"]],template:function(u,m){1&u&&(t.TgZ(0,"p-sidebar",0),t.NdJ("visibleChange",function(E){return m.sidebarVisible=E}),t.YNc(1,b,10,3,"ng-template",1),t.qZA(),t.TgZ(2,"i",2),t.NdJ("click",function(){return m.sidebarVisible=!0}),t.qZA()),2&u&&t.Q6J("visible",m.sidebarVisible)},dependencies:[i.rH,_.jx,r.Y,a.P],styles:[".line-menu[_ngcontent-%COMP%]{padding-top:15px;padding-bottom:15px;padding-left:15px;transition:background-color .3s,color .3s}.line-menu[_ngcontent-%COMP%]:hover{background:rgb(240,166,250);color:#fff}"]})}return n})();var O=e(5948),D=e(8271),T=e(9512),I=e(2137);const M=function(){return{cursor:"pointer"}};function A(n,C){if(1&n){const p=t.EpF();t.TgZ(0,"p-avatar",7),t.NdJ("click",function(m){t.CHM(p),t.oxw();const f=t.MAs(7);return t.KtG(f.toggle(m))}),t.qZA()}if(2&n){const p=t.oxw();t.Q6J("image",p.userImage)("ngStyle",t.DdM(2,M))}}function x(n,C){if(1&n){const p=t.EpF();t.TgZ(0,"p-avatar",8),t.NdJ("click",function(m){t.CHM(p),t.oxw();const f=t.MAs(7);return t.KtG(f.toggle(m))}),t.qZA()}2&n&&t.Q6J("ngStyle",t.DdM(1,M))}const y=function(){return{width:"80vw",maxWidth:"60vh"}};let S=(()=>{class n{constructor(p,u,m,f){this.router=p,this.authService=u,this.confirmationService=m,this.usuarioService=f,this.menuVisible=!1,this.userImage=null,this.perfil=this.authService.logueo.idPerfil}get usuario(){return this.authService.logueo.usuario}ngOnInit(){this.usuarioService.traerUnUsuario(Number(this.authService.logueo.id)).subscribe(E=>{this.userImage=E.img?`data:image/jpeg;base64,${E.img}`:null});const p={label:"Perfil",icon:"pi pi-fw pi-user",command:()=>this.router.navigateByUrl(`/perfil/${this.authService.logueo.id}`)},f={label:"Cerrar sesi\xf3n",icon:"pi pi-fw pi-power-off",command:()=>this.confirm()};this.items=1===this.perfil?[p,{label:"Usuarios",icon:"pi pi-fw pi-users",command:()=>this.router.navigateByUrl("/usuarios")},{label:"Configuraci\xf3n",icon:"pi pi-fw pi-cog",command:()=>this.router.navigateByUrl("/configuracion")},f]:[p,f]}confirm(){this.confirmationService.confirm({message:"\xbfDesea cerrar sesi\xf3n?",header:"Confirmaci\xf3n",icon:"pi pi-exclamation-triangle",accept:()=>{this.logout()}})}logout(){this.router.navigateByUrl("/auth"),this.authService.logout()}static#t=this.\u0275fac=function(u){return new(u||n)(t.Y36(i.F0),t.Y36(c.e),t.Y36(_.YP),t.Y36(O.i))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-avatar-usuario"]],features:[t._Bn([_.YP])],decls:9,vars:8,consts:[[1,"user-profile"],[1,"greeting"],["styleClass","mr-3 avatar-with-shadow profile-avatar","size","large","shape","circle",3,"image","ngStyle","click",4,"ngIf","ngIfElse"],["defaultAvatar",""],[3,"model","popup"],["menu",""],[1,"confirmation"],["styleClass","mr-3 avatar-with-shadow profile-avatar","size","large","shape","circle",3,"image","ngStyle","click"],["icon","pi pi-user","styleClass","mr-3 avatar-with-shadow profile-avatar","size","large","shape","circle",3,"ngStyle","click"]],template:function(u,m){if(1&u&&(t.TgZ(0,"div",0)(1,"span",1),t._uU(2),t.qZA(),t.YNc(3,A,1,3,"p-avatar",2),t.YNc(4,x,1,2,"ng-template",null,3,t.W1O),t._UZ(6,"p-tieredMenu",4,5)(8,"p-confirmDialog",6),t.qZA()),2&u){const f=t.MAs(5);t.xp6(2),t.Oqu(m.usuario),t.xp6(1),t.Q6J("ngIf",m.userImage)("ngIfElse",f),t.xp6(3),t.Q6J("model",m.items)("popup",!0),t.xp6(2),t.Akn(t.DdM(7,y))}},dependencies:[l.O5,l.PC,D.q,T.yp,I.Q],styles:[".user-profile[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.profile-avatar[_ngcontent-%COMP%]{box-shadow:0 4px 8px #fff1f1a8!important;border:2px solid #ddd!important;transition:transform .2s ease!important}.greeting[_ngcontent-%COMP%]{font-size:1.2rem!important;font-weight:700!important;margin-right:1rem!important;text-shadow:1px 1px 2px rgba(161,157,163,.699)!important}"]})}return n})();function K(n,C){if(1&n&&t._UZ(0,"img",4),2&n){const p=t.oxw();t.Q6J("src",p.logoBase64,t.LSH)}}let B=(()=>{class n{constructor(p,u,m){this.authService=p,this.sucursalService=u,this.empresaService=m,this.logoBase64=""}ngOnInit(){const p=localStorage.getItem("token"),u=(0,o.o)(p);this.idSucursal=u.codSuc,this.sucursalService.traerUnaSucursal(this.idSucursal).subscribe(m=>{this.idEmpresa=m.idEmpresa,this.empresaService.traerUnaEmpresa(this.idEmpresa).subscribe(f=>{f.img&&(this.logoBase64=`data:image/jpeg;base64,${f.img}`)})}),this.items=[{label:"Update",icon:"pi pi-refresh",command:()=>{}},{label:"Delete",icon:"pi pi-times",command:()=>{}},{label:"Angular.io",icon:"pi pi-info",url:"http://angular.io"},{separator:!0},{label:"Setup",icon:"pi pi-cog",routerLink:["/setup"]}]}static#t=this.\u0275fac=function(u){return new(u||n)(t.Y36(c.e),t.Y36(v.f),t.Y36(h.P))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-tool-bar"]],decls:7,vars:1,consts:[[1,"p-toolbar-group-start"],[1,"p-toolbar-group-center"],["alt","Logo","class","logo",3,"src",4,"ngIf"],[1,"p-toolbar-group-end"],["alt","Logo",1,"logo",3,"src"]],template:function(u,m){1&u&&(t.TgZ(0,"p-toolbar")(1,"div",0),t._UZ(2,"app-menu"),t.qZA(),t.TgZ(3,"div",1),t.YNc(4,K,1,1,"img",2),t.qZA(),t.TgZ(5,"div",3),t._UZ(6,"app-avatar-usuario"),t.qZA()()),2&u&&(t.xp6(4),t.Q6J("ngIf",m.logoBase64))},dependencies:[l.O5,g.o,P,S],styles:[".logo[_ngcontent-%COMP%]{width:150px;height:60px;object-fit:contain}"]})}return n})()},7117:(U,d,e)=>{e.d(d,{P:()=>g});var o=e(9646),t=e(4004),c=e(262),v=e(2340),h=e(8256),l=e(529);let g=(()=>{class i{get empresa(){return{...this._empresa}}constructor(r){this.http=r,this.baseUrl=v.N.baseUrl}traerEmpresas(){return this.http.get(`${this.baseUrl}/empresa`).pipe((0,t.U)(a=>a),(0,c.K)(a=>(0,o.of)(!1)))}traerUnaEmpresa(r){return this.http.get(`${this.baseUrl}/empresa/${r}`).pipe((0,t.U)(s=>(this._empresa=s,s)),(0,c.K)(s=>(0,o.of)(!1)))}crearEmpresa(r){return this.http.post(`${this.baseUrl}/empresa`,r).pipe((0,t.U)(s=>s),(0,c.K)(s=>(0,o.of)(s.error)))}modificarEmpresa(r){return this.http.put(`${this.baseUrl}/empresa/${r.id}`,r).pipe((0,t.U)(s=>s),(0,c.K)(s=>(0,o.of)(s.error)))}static#t=this.\u0275fac=function(a){return new(a||i)(h.LFG(l.eN))};static#e=this.\u0275prov=h.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},248:(U,d,e)=>{e.d(d,{f:()=>g});var o=e(9646),t=e(4004),c=e(262),v=e(2340),h=e(8256),l=e(529);let g=(()=>{class i{constructor(r){this.http=r,this.baseUrl=v.N.baseUrl}traerSucursales(){return this.http.get(`${this.baseUrl}/sucursal`).pipe((0,t.U)(a=>a),(0,c.K)(a=>(0,o.of)(!1)))}traerUnaSucursal(r){return this.http.get(`${this.baseUrl}/sucursal/${r}`).pipe((0,t.U)(s=>s),(0,c.K)(s=>(0,o.of)(!1)))}crearSucursal(r){return this.http.post(`${this.baseUrl}/sucursal`,r).pipe((0,t.U)(s=>s),(0,c.K)(s=>(0,o.of)(s.error)))}modificarSucursal(r){return this.http.put(`${this.baseUrl}/sucursal/${r.id}`,r).pipe((0,t.U)(s=>s),(0,c.K)(s=>(0,o.of)(s.error)))}eliminarSucursal(r){return this.http.delete(`${this.baseUrl}/sucursal/${r}`).pipe((0,t.U)(s=>s),(0,c.K)(s=>(0,o.of)(s.error)))}static#t=this.\u0275fac=function(a){return new(a||i)(h.LFG(l.eN))};static#e=this.\u0275prov=h.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},5948:(U,d,e)=>{e.d(d,{i:()=>g});var o=e(9646),t=e(4004),c=e(262),v=e(2340),h=e(8256),l=e(529);let g=(()=>{class i{get usuario(){return{...this._usuario}}constructor(r){this.http=r,this.baseUrl=v.N.baseUrl}traerUsuarios(){return this.http.get(`${this.baseUrl}/usuario`).pipe((0,t.U)(a=>a),(0,c.K)(a=>(0,o.of)(!1)))}traerUnUsuario(r){return this.http.get(`${this.baseUrl}/usuario/${r}`).pipe((0,t.U)(s=>(this._usuario=s,s)),(0,c.K)(s=>(0,o.of)(!1)))}crearUsuario(r){return this.http.post(`${this.baseUrl}/usuario`,r).pipe((0,t.U)(s=>s),(0,c.K)(s=>(0,o.of)(s.error)))}modificarUsuario(r){return this.http.put(`${this.baseUrl}/usuario/${r.id}`,r).pipe((0,t.U)(s=>s),(0,c.K)(s=>(0,o.of)(s.error)))}static#t=this.\u0275fac=function(a){return new(a||i)(h.LFG(l.eN))};static#e=this.\u0275prov=h.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},5656:(U,d,e)=>{e.d(d,{o:()=>v});class o extends Error{}function v(h,l){if("string"!=typeof h)throw new o("Invalid token specified: must be a string");l||(l={});const g=!0===l.header?0:1,i=h.split(".")[g];if("string"!=typeof i)throw new o(`Invalid token specified: missing part #${g+1}`);let _;try{_=function c(h){let l=h.replace(/-/g,"+").replace(/_/g,"/");switch(l.length%4){case 0:break;case 2:l+="==";break;case 3:l+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function t(h){return decodeURIComponent(atob(h).replace(/(.)/g,(l,g)=>{let i=g.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i}))}(l)}catch{return atob(l)}}(i)}catch(r){throw new o(`Invalid token specified: invalid base64 for part #${g+1} (${r.message})`)}try{return JSON.parse(_)}catch(r){throw new o(`Invalid token specified: invalid json for part #${g+1} (${r.message})`)}}o.prototype.name="InvalidTokenError"}}]);